var Cr=Object.defineProperty;var Or=(j,U,Y)=>U in j?Cr(j,U,{enumerable:!0,configurable:!0,writable:!0,value:Y}):j[U]=Y;var R=(j,U,Y)=>(Or(j,typeof U!="symbol"?U+"":U,Y),Y);(async()=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const j="modulepreload",U=function(t,e){return new URL(t,e).href},Y={},Te=function(t,e,r){let i=Promise.resolve();if(e&&e.length>0){const n=document.getElementsByTagName("link");i=Promise.all(e.map(s=>{if(s=U(s,r),s in Y)return;Y[s]=!0;const o=s.endsWith(".css"),h=o?'[rel="stylesheet"]':"";if(r)for(let f=n.length-1;f>=0;f--){const d=n[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${h}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":j,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((f,d)=>{c.addEventListener("load",f),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})}))}return i.then(()=>t()).catch(n=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=n,window.dispatchEvent(s),!s.defaultPrevented)throw n})};var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ie(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kt={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(Be,function(){var r=`<div class="gl-box">
  <svg viewBox="0 0 55 60">
    <text x="27" y="56" class="gl-fps">00 FPS</text>
    <text x="28" y="8" class="gl-mem"></text>
    <rect x="0" y="14" rx="4" ry="4" width="55" height="32"></rect>
    <polyline class="gl-chart"></polyline>
  </svg>
  <svg viewBox="0 0 14 60" class="gl-cpu-svg">
    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>
    <line x1="7" y1="38" x2="7" y2="11" class="gl-cpu" stroke-dasharray="0 27"/>
    <path d="M5.35 43c-.464 0-.812.377-.812.812v1.16c-.783.1972-1.421.812-1.595 1.624h-1.16c-.435 0-.812.348-.812.812s.348.812.812.812h1.102v1.653H1.812c-.464 0-.812.377-.812.812 0 .464.377.812.812.812h1.131c.1943.783.812 1.392 1.595 1.595v1.131c0 .464.377.812.812.812.464 0 .812-.377.812-.812V53.15h1.653v1.073c0 .464.377.812.812.812.464 0 .812-.377.812-.812v-1.131c.783-.1943 1.392-.812 1.595-1.595h1.131c.464 0 .812-.377.812-.812 0-.464-.377-.812-.812-.812h-1.073V48.22h1.102c.435 0 .812-.348.812-.812s-.348-.812-.812-.812h-1.16c-.1885-.783-.812-1.421-1.595-1.624v-1.131c0-.464-.377-.812-.812-.812-.464 0-.812.377-.812.812v1.073H6.162v-1.073c0-.464-.377-.812-.812-.812zm.58 3.48h2.088c.754 0 1.363.609 1.363 1.363v2.088c0 .754-.609 1.363-1.363 1.363H5.93c-.754 0-1.363-.609-1.363-1.363v-2.088c0-.754.609-1.363 1.363-1.363z"/>
  </svg>
  <svg viewBox="0 0 14 60" class="gl-gpu-svg">
    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>
    <line x1="7" y1="38" x2="7" y2="11" class="gl-gpu" stroke-dasharray="0 27"/>
    <path d="M1.94775 43.3772a.736.736 0 10-.00416 1.472c.58535.00231.56465.1288.6348.3197.07015.18975.04933.43585.04933.43585l-.00653.05405v8.671a.736.736 0 101.472 0v-1.4145c.253.09522.52785.1495.81765.1495h5.267c1.2535 0 2.254-.9752 2.254-2.185v-3.105c0-1.2075-1.00625-2.185-2.254-2.185h-5.267c-.28865 0-.5635.05405-.8165.1495.01806-.16445.04209-.598-.1357-1.0787-.22425-.6072-.9499-1.2765-2.0125-1.2765zm2.9095 3.6455c.42435 0 .7659.36225.7659.8119v2.9785c0 .44965-.34155.8119-.7659.8119s-.7659-.36225-.7659-.8119v-2.9785c0-.44965.34155-.8119.7659-.8119zm4.117 0a2.3 2.3 0 012.3 2.3 2.3 2.3 0 01-2.3 2.3 2.3 2.3 0 01-2.3-2.3 2.3 2.3 0 012.3-2.3z"/>
  </svg>
</div>`,i=`#gl-bench {
  position:absolute;
  left:0;
  top:0;
  z-index:1000;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

#gl-bench div {
  position: relative;
  display: block;
  margin: 4px;
  padding: 0 7px 0 10px;
  background: #6c6;
  border-radius: 15px;
  cursor: pointer;
  opacity: 0.9;
}

#gl-bench svg {
  height: 60px;
  margin: 0 -1px;
}

#gl-bench text {
  font-size: 12px;
  font-family: Helvetica,Arial,sans-serif;
  font-weight: 700;
  dominant-baseline: middle;
  text-anchor: middle;
}

#gl-bench .gl-mem {
  font-size: 9px;
}

#gl-bench line {
  stroke-width: 5;
  stroke: #112211;
  stroke-linecap: round;
}

#gl-bench polyline {
  fill: none;
  stroke: #112211;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-width: 3.5;
}

#gl-bench rect {
  fill: #448844;
}

#gl-bench .opacity {
  stroke: #448844;
}
`;class n{constructor(o,h={}){this.css=i,this.svg=r,this.paramLogger=()=>{},this.chartLogger=()=>{},this.chartLen=20,this.chartHz=20,this.names=[],this.cpuAccums=[],this.gpuAccums=[],this.activeAccums=[],this.chart=new Array(this.chartLen),this.now=()=>performance&&performance.now?performance.now():Date.now(),this.updateUI=()=>{[].forEach.call(this.nodes["gl-gpu-svg"],u=>{u.style.display=this.trackGPU?"inline":"none"})},Object.assign(this,h),this.detected=0,this.finished=[],this.isFramebuffer=0,this.frameId=0;let c,f=0,d,l=u=>{++f<20?c=requestAnimationFrame(l):(this.detected=Math.ceil(1e3*f/(u-d)/70),cancelAnimationFrame(c)),d||(d=u)};if(requestAnimationFrame(l),o){const u=async(p,y)=>Promise.resolve(setTimeout(()=>{o.getError();const v=this.now()-p;y.forEach((A,w)=>{A&&(this.gpuAccums[w]+=v)})},0)),m=(p,y,v)=>function(){const A=y.now();p.apply(v,arguments),y.trackGPU&&y.finished.push(u(A,y.activeAccums.slice(0)))};["drawArrays","drawElements","drawArraysInstanced","drawBuffers","drawElementsInstanced","drawRangeElements"].forEach(p=>{o[p]&&(o[p]=m(o[p],this,o))}),o.getExtension=((p,y)=>function(){let v=p.apply(o,arguments);return v&&["drawElementsInstancedANGLE","drawBuffersWEBGL"].forEach(A=>{v[A]&&(v[A]=m(v[A],y,v))}),v})(o.getExtension,this)}if(!this.withoutUI){this.dom||(this.dom=document.body);let u=document.createElement("div");u.id="gl-bench",this.dom.appendChild(u),this.dom.insertAdjacentHTML("afterbegin",'<style id="gl-bench-style">'+this.css+"</style>"),this.dom=u,this.dom.addEventListener("click",()=>{this.trackGPU=!this.trackGPU,this.updateUI()}),this.paramLogger=((m,p,y)=>{const v=["gl-cpu","gl-gpu","gl-mem","gl-fps","gl-gpu-svg","gl-chart"],A=Object.assign({},v);return v.forEach(w=>A[w]=p.getElementsByClassName(w)),this.nodes=A,(w,E,x,g,_,T,O)=>{A["gl-cpu"][w].style.strokeDasharray=(E*.27).toFixed(0)+" 100",A["gl-gpu"][w].style.strokeDasharray=(x*.27).toFixed(0)+" 100",A["gl-mem"][w].innerHTML=y[w]?y[w]:g?"mem: "+g.toFixed(0)+"mb":"",A["gl-fps"][w].innerHTML=_.toFixed(0)+" FPS",m(y[w],E,x,g,_,T,O)}})(this.paramLogger,this.dom,this.names),this.chartLogger=((m,p)=>{let y={"gl-chart":p.getElementsByClassName("gl-chart")};return(v,A,w)=>{let E="",x=A.length;for(let g=0;g<x;g++){let _=(w+g+1)%x;A[_]!=null&&(E=E+" "+(55*g/(x-1)).toFixed(1)+","+(45-A[_]*22/60/this.detected).toFixed(1))}y["gl-chart"][v].setAttribute("points",E),m(this.names[v],A,w)}})(this.chartLogger,this.dom)}}addUI(o){this.names.indexOf(o)==-1&&(this.names.push(o),this.dom&&(this.dom.insertAdjacentHTML("beforeend",this.svg),this.updateUI()),this.cpuAccums.push(0),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFrame(o){this.frameId++;const h=o||this.now();if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=h;else{let c=h-this.paramTime;if(c>=1e3){const f=this.frameId-this.paramFrame,d=f/c*1e3;for(let l=0;l<this.names.length;l++){const u=this.cpuAccums[l]/c*100,m=this.gpuAccums[l]/c*100,p=performance&&performance.memory?performance.memory.usedJSHeapSize/(1<<20):0;this.paramLogger(l,u,m,p,d,c,f),this.cpuAccums[l]=0,Promise.all(this.finished).then(()=>{this.gpuAccums[l]=0,this.finished=[]})}this.paramFrame=this.frameId,this.paramTime=h}}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=h,this.circularId=0;else{let c=h-this.chartTime,f=this.chartHz*c/1e3;for(;--f>0&&this.detected;){const d=(this.frameId-this.chartFrame)/c*1e3;this.chart[this.circularId%this.chartLen]=d;for(let l=0;l<this.names.length;l++)this.chartLogger(l,this.chart,this.circularId);this.circularId++,this.chartFrame=this.frameId,this.chartTime=h}}}begin(o){this.updateAccums(o)}end(o){this.updateAccums(o)}updateAccums(o){let h=this.names.indexOf(o);h==-1&&(h=this.names.length,this.addUI(o));const c=this.now(),f=c-this.t0;for(let d=0;d<h+1;d++)this.activeAccums[d]&&(this.cpuAccums[d]+=f);this.activeAccums[h]=!this.activeAccums[h],this.t0=c}}return n})})(kt);var Ue=kt.exports;const Le=Ie(Ue);var Mt=1e-6,ct=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function $(){var t=new ct(16);return ct!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Wt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Vt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ne(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],s=e[6],o=e[7],h=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=h}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ht(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],h=e[5],c=e[6],f=e[7],d=e[8],l=e[9],u=e[10],m=e[11],p=e[12],y=e[13],v=e[14],A=e[15],w=r*h-i*o,E=r*c-n*o,x=r*f-s*o,g=i*c-n*h,_=i*f-s*h,T=n*f-s*c,O=d*y-l*p,et=d*v-u*p,V=d*A-m*p,rt=l*v-u*y,H=l*A-m*y,gt=u*A-m*v,M=w*gt-E*H+x*rt+g*V-_*et+T*O;return M?(M=1/M,t[0]=(h*gt-c*H+f*rt)*M,t[1]=(n*H-i*gt-s*rt)*M,t[2]=(y*T-v*_+A*g)*M,t[3]=(u*_-l*T-m*g)*M,t[4]=(c*V-o*gt-f*et)*M,t[5]=(r*gt-n*V+s*et)*M,t[6]=(v*x-p*T-A*E)*M,t[7]=(d*T-u*x+m*E)*M,t[8]=(o*H-h*V+f*O)*M,t[9]=(i*V-r*H-s*O)*M,t[10]=(p*_-y*x+A*w)*M,t[11]=(l*x-d*_-m*w)*M,t[12]=(h*et-o*rt-c*O)*M,t[13]=(r*rt-i*et+n*O)*M,t[14]=(y*E-p*g-v*w)*M,t[15]=(d*g-l*E+u*w)*M,t):null}function Pe(t,e,r){var i=e[0],n=e[1],s=e[2],o=e[3],h=e[4],c=e[5],f=e[6],d=e[7],l=e[8],u=e[9],m=e[10],p=e[11],y=e[12],v=e[13],A=e[14],w=e[15],E=r[0],x=r[1],g=r[2],_=r[3];return t[0]=E*i+x*h+g*l+_*y,t[1]=E*n+x*c+g*u+_*v,t[2]=E*s+x*f+g*m+_*A,t[3]=E*o+x*d+g*p+_*w,E=r[4],x=r[5],g=r[6],_=r[7],t[4]=E*i+x*h+g*l+_*y,t[5]=E*n+x*c+g*u+_*v,t[6]=E*s+x*f+g*m+_*A,t[7]=E*o+x*d+g*p+_*w,E=r[8],x=r[9],g=r[10],_=r[11],t[8]=E*i+x*h+g*l+_*y,t[9]=E*n+x*c+g*u+_*v,t[10]=E*s+x*f+g*m+_*A,t[11]=E*o+x*d+g*p+_*w,E=r[12],x=r[13],g=r[14],_=r[15],t[12]=E*i+x*h+g*l+_*y,t[13]=E*n+x*c+g*u+_*v,t[14]=E*s+x*f+g*m+_*A,t[15]=E*o+x*d+g*p+_*w,t}function Se(t,e,r){var i=r[0],n=r[1],s=r[2],o,h,c,f,d,l,u,m,p,y,v,A;return e===t?(t[12]=e[0]*i+e[4]*n+e[8]*s+e[12],t[13]=e[1]*i+e[5]*n+e[9]*s+e[13],t[14]=e[2]*i+e[6]*n+e[10]*s+e[14],t[15]=e[3]*i+e[7]*n+e[11]*s+e[15]):(o=e[0],h=e[1],c=e[2],f=e[3],d=e[4],l=e[5],u=e[6],m=e[7],p=e[8],y=e[9],v=e[10],A=e[11],t[0]=o,t[1]=h,t[2]=c,t[3]=f,t[4]=d,t[5]=l,t[6]=u,t[7]=m,t[8]=p,t[9]=y,t[10]=v,t[11]=A,t[12]=o*i+d*n+p*s+e[12],t[13]=h*i+l*n+y*s+e[13],t[14]=c*i+u*n+v*s+e[14],t[15]=f*i+m*n+A*s+e[15]),t}function De(t,e,r){var i=r[0],n=r[1],s=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ce(t,e,r){var i=Math.sin(r),n=Math.cos(r),s=e[4],o=e[5],h=e[6],c=e[7],f=e[8],d=e[9],l=e[10],u=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+f*i,t[5]=o*n+d*i,t[6]=h*n+l*i,t[7]=c*n+u*i,t[8]=f*n-s*i,t[9]=d*n-o*i,t[10]=l*n-h*i,t[11]=u*n-c*i,t}function Oe(t,e,r){var i=Math.sin(r),n=Math.cos(r),s=e[0],o=e[1],h=e[2],c=e[3],f=e[8],d=e[9],l=e[10],u=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-f*i,t[1]=o*n-d*i,t[2]=h*n-l*i,t[3]=c*n-u*i,t[8]=s*i+f*n,t[9]=o*i+d*n,t[10]=h*i+l*n,t[11]=c*i+u*n,t}function Ye(t,e,r){var i=Math.sin(r),n=Math.cos(r),s=e[0],o=e[1],h=e[2],c=e[3],f=e[4],d=e[5],l=e[6],u=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+f*i,t[1]=o*n+d*i,t[2]=h*n+l*i,t[3]=c*n+u*i,t[4]=f*n-s*i,t[5]=d*n-o*i,t[6]=l*n-h*i,t[7]=u*n-c*i,t}function ke(t,e,r,i,n,s,o){var h=1/(e-r),c=1/(i-n),f=1/(s-o);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*h,t[13]=(n+i)*c,t[14]=(o+s)*f,t[15]=1,t}var We=ke;function Ve(t,e,r,i){var n,s,o,h,c,f,d,l,u,m,p=e[0],y=e[1],v=e[2],A=i[0],w=i[1],E=i[2],x=r[0],g=r[1],_=r[2];return Math.abs(p-x)<Mt&&Math.abs(y-g)<Mt&&Math.abs(v-_)<Mt?Vt(t):(d=p-x,l=y-g,u=v-_,m=1/Math.hypot(d,l,u),d*=m,l*=m,u*=m,n=w*u-E*l,s=E*d-A*u,o=A*l-w*d,m=Math.hypot(n,s,o),m?(m=1/m,n*=m,s*=m,o*=m):(n=0,s=0,o=0),h=l*o-u*s,c=u*n-d*o,f=d*s-l*n,m=Math.hypot(h,c,f),m?(m=1/m,h*=m,c*=m,f*=m):(h=0,c=0,f=0),t[0]=n,t[1]=h,t[2]=d,t[3]=0,t[4]=s,t[5]=c,t[6]=l,t[7]=0,t[8]=o,t[9]=f,t[10]=u,t[11]=0,t[12]=-(n*p+s*y+o*v),t[13]=-(h*p+c*y+f*v),t[14]=-(d*p+l*y+u*v),t[15]=1,t)}var jt=Pe;function He(){var t=new ct(3);return ct!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function it(t,e,r){var i=new ct(3);return i[0]=t,i[1]=e,i[2]=r,i}function Tt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}(function(){var t=He();return function(e,r,i,n,s,o){var h,c;for(r||(r=3),i||(i=0),n?c=Math.min(n*r+i,e.length):c=e.length,h=i;h<c;h+=r)t[0]=e[h],t[1]=e[h+1],t[2]=e[h+2],s(t,t,o),e[h]=t[0],e[h+1]=t[1],e[h+2]=t[2];return e}})();for(var X=256,$t=[],Xt=256,vt;X--;)$t[X]=(X+256).toString(16).substring(1);function je(t){var e=0,r=t||11;if(!vt||X+r>Xt*2)for(vt="",X=0;e<Xt;e++)vt+=$t[Math.random()*256|0];return vt.substring(X,X+++r)}var At={},$e=function(){function t(e,r,i,n){this.x=e,this.y=r,this.w=i,this.h=n}return t.prototype.fitsIn=function(e){return e.w>=this.w&&e.h>=this.h},t.prototype.sameSizeAs=function(e){return this.w===e.w&&this.h===e.h},t}();Object.defineProperty(At,"__esModule",{value:!0}),At.default=$e;var xt={},Bt=At;function zt(t){var e=t.width/2,r=document.createElement("canvas");r.id=t.id||"",r.width=t.width+t.width,r.height=t.height+t.height;var i=r.getContext("2d"),n=i.createPattern(t,"repeat");return i.fillStyle=n,i.translate(e,e),i.fillRect(-e,-e,r.width+e,r.height+e),i.translate(-e,-e),r}function Gt(t,e,r,i){var n=e?t.rect.w/4:0;return[[t.rect.x+n,t.rect.y+n],[t.rect.x+n+(t.rect.w-n*2),t.rect.y+n],[t.rect.x+n+(t.rect.w-n*2),t.rect.y+n+(t.rect.h-n*2)],[t.rect.x+n,t.rect.y+n+(t.rect.h-n*2)]].map(function(s){return s[0]!==0&&(s[0]=s[0]/r),s[1]!==0&&(s[1]=s[1]/i),s})}function qt(t,e,r,i){var n=e?t.rect.w/4:0,s=new Float32Array(8);return s[0]=(t.rect.x+n)/r,s[1]=(t.rect.y+n)/i,s[2]=(t.rect.x+n+(t.rect.w-n*2))/r,s[3]=(t.rect.y+n)/i,s[4]=(t.rect.x+n+(t.rect.w-n*2))/r,s[5]=(t.rect.y+n+(t.rect.h-n*2))/i,s[6]=(t.rect.x+n)/r,s[7]=(t.rect.y+n+(t.rect.h-n*2))/i,s}var lt=function(){function t(e,r,i,n){this.left=this.right=null,this.rect=new Bt.default(e,r,i,n),this.filled=!1}return t.prototype.pack=function(e){return this.left!==null?this.left.pack(e)||this.right.pack(e):this.filled||!e.fitsIn(this.rect)?null:e.sameSizeAs(this.rect)?(this.filled=!0,this):(this.rect.w-e.w>this.rect.h-e.h?(this.left=new t(this.rect.x,this.rect.y,e.w,this.rect.h),this.right=new t(this.rect.x+e.w,this.rect.y,this.rect.w-e.w,this.rect.h)):(this.left=new t(this.rect.x,this.rect.y,this.rect.w,e.h),this.right=new t(this.rect.x,this.rect.y+e.h,this.rect.w,this.rect.h-e.h)),this.left.pack(e))},t}();xt.AtlasNode=lt;var Xe=function(){function t(e,r){r===void 0&&(r={}),this.tilepad=r.tilepad||!1,this.canvas=e,this.context=e.getContext("2d"),this._rootNode=new lt(0,0,this.canvas.width,this.canvas.height),this._terminalNodes={},this.invalidateUvIndices()}return t.prototype.pack=function(e,r){return this._checkId(e),this._pack(e,this.tilepad?zt(r):r)},t.prototype.expand=function(e,r){return this._checkId(e),this.invalidateUvIndices(),this._expand(e,this.tilepad?zt(r):r)},t.prototype.index=function(){var e=this;return Object.keys(this._terminalNodes).map(function(r){return e._terminalNodes[r].rect})},t.prototype.uv=function(){return this._uvs?this._uvs:(this._uvs=this.buildUvIndex(),this._uvs)},t.prototype.uv2=function(){return this._uvs2?this._uvs2:(this._uvs2=this.buildUvIndex2(),this._uvs2)},t.prototype.invalidateUvIndices=function(){this._uvs=null,this._uvs2=null},t.prototype._checkId=function(e){if(this._terminalNodes[e])throw new Error("Duplicated texture id "+e)},t.prototype._pack=function(e,r){var i=new Bt.default(0,0,r.width,r.height),n=this._rootNode.pack(i);return n?(this._ontoCanvas(e,r,n.rect),this._terminalNodes[e]=n,this._uvs&&(this._uvs[e]=Gt(n,this.tilepad,this.canvas.width,this.canvas.height)),this._uvs2&&(this._uvs2[e]=qt(n,this.tilepad,this.canvas.width,this.canvas.height)),n):null},t.prototype._expand=function(e,r){var i=new Bt.default(0,0,r.width,r.height),n=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),s;this._rootNode.rect.w<this._rootNode.rect.h?(this.canvas.width=this._rootNode.rect.w+i.w,s=new lt(this._rootNode.rect.w,0,i.w,this._rootNode.rect.h)):(this.canvas.height=this._rootNode.rect.h+i.h,s=new lt(0,this._rootNode.rect.h,this._rootNode.rect.w,i.h)),this.context.putImageData(n,0,0);var o=this._rootNode;return this._rootNode=new lt(0,0,this.canvas.width,this.canvas.height),this._rootNode.left=o,this._rootNode.right=s,this._pack(e,r)?this:this._expand(e,r)},t.prototype.buildUvIndex=function(){var e=this,r={};return Object.keys(this._terminalNodes).map(function(i){var n=e._terminalNodes[i];r[i]=Gt(n,e.tilepad,e.canvas.width,e.canvas.height)}),r},t.prototype.buildUvIndex2=function(){var e=this,r={};return Object.keys(this._terminalNodes).map(function(i){var n=e._terminalNodes[i];r[i]=qt(n,e.tilepad,e.canvas.width,e.canvas.height)}),r},t.prototype._ontoCanvas=function(e,r,i){this.context.clearRect(i.x,i.y,i.w,i.h),this.context.drawImage(r,i.x,i.y,i.w,i.h)},t}();Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=Xe;var ze=At;ze.default;var Ge=xt,qe=Ge.default,Ke=Object.defineProperty,Je=(t,e,r)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z=(t,e,r)=>(Je(t,typeof e!="symbol"?e+"":e,r),r),Kt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},B=(t,e,r)=>(Kt(t,e,"read from private field"),r?r.call(t):e.get(t)),yt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Qe=(t,e,r,i)=>(Kt(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),It="-- DEFINES_HOOK --",Ze=(t,e,r,i={})=>{if(Object.keys(i).length&&!r.includes(It))throw new Error(`in order to include defines, you must provide "${It}" in your shader code`);let n="";for(const[h,c]of Object.entries(i)){if(typeof c=="boolean"&&!c)continue;let f=`${c}`;typeof c=="number"&&Number.isInteger(c)&&(f+=".0"),n+=`#define ${h} ${f}
`}r=r.replace(It,n);const s=t.createShader(e);if(t.shaderSource(s,r),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS))return s;const o=`
    Error in ${e===t.VERTEX_SHADER?"Vertex":"Fragment"} shader:
    ${t.getShaderInfoLog(s)}
  `;throw t.deleteShader(s),new Error(o)},Jt=Ze,tr=(t,e,r,i)=>{const n=Jt(t,t.VERTEX_SHADER,e,i),s=Jt(t,t.FRAGMENT_SHADER,r,i),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),t.linkProgram(o),t.detachShader(o,n),t.deleteShader(n),t.detachShader(o,s),t.deleteShader(s),t.getProgramParameter(o,t.LINK_STATUS))return o;const h=new Error(`Error linking program: ${t.getProgramInfoLog(o)}`);throw t.deleteProgram(o),h},Ut=tr,er=(t,e,r,i)=>{let n;switch(e){case t.FLOAT:return t.uniform1f(r,i);case t.FLOAT_VEC2:return n=i,t.uniform2f(r,n[0],n[1]);case t.FLOAT_VEC3:return n=i,t.uniform3f(r,n[0],n[1],n[2]);case t.FLOAT_VEC4:return n=i,t.uniform4f(r,n[0],n[1],n[2],n[3]);case t.BOOL:case t.INT:case t.SAMPLER_2D:case t.SAMPLER_CUBE:return t.uniform1i(r,i);case t.BOOL_VEC2:case t.INT_VEC2:return n=i,t.uniform2i(r,n[0],n[1]);case t.BOOL_VEC3:case t.INT_VEC3:return n=i,t.uniform3i(r,n[0],n[1],n[2]);case t.BOOL_VEC4:case t.INT_VEC4:return n=i,t.uniform4i(r,n[0],n[1],n[2],n[3]);case t.FLOAT_MAT2:return t.uniformMatrix2fv(r,!1,i);case t.FLOAT_MAT3:return t.uniformMatrix3fv(r,!1,i);case t.FLOAT_MAT4:return t.uniformMatrix4fv(r,!1,i);default:throw new Error("wrong type for uniform")}},Qt=er,rr=(t={})=>{const{width:e=1,height:r=1,widthSegments:i=1,heightSegments:n=1,flipUVy:s=!1}=t,o=i,h=n,c=(o+1)*(h+1),f=o*h*6,d=new Float32Array(c*3+c*2),l=c>65536?new Uint32Array(f):new Uint16Array(f);let u=0,m=0;const p=u,y=e/o,v=r/h,A=1,w=-1,E=0,x=5;for(let g=0;g<=h;g++){const _=g*v-r/2;for(let T=0;T<=o;T++,u++){const O=T*y-e/2;if(d[u*x+0]=O*A,d[u*x+1]=_*w,d[u*x+2]=E/2,d[u*x+3]=T/o,d[u*x+4]=s?1-g/h:g/h,g===h||T===o)continue;const et=p+T+g*(o+1),V=p+T+(g+1)*(o+1),rt=p+T+(g+1)*(o+1)+1,H=p+T+g*(o+1)+1;l[m*6]=et,l[m*6+1]=V,l[m*6+2]=H,l[m*6+3]=V,l[m*6+4]=rt,l[m*6+5]=H,m++}}return{width:e,height:r,vertexCount:l.length,vertexStride:x,interleavedArray:d,indicesArray:l}},ir=rr,nr=(t={})=>{const{width:e=1,height:r=1}=t,i=4,n=3,s=new Float32Array(i*n);return s[0]=-e*.5,s[1]=-r*.5,s[2]=0,s[3]=e*.5,s[4]=-r*.5,s[5]=0,s[6]=e*.5,s[7]=r*.5,s[8]=0,s[9]=-e*.5,s[10]=r*.5,s[11]=0,{width:e,height:r,vertexCount:i,vertexStride:n,interleavedArray:s}},ar=nr,sr=(t={})=>{const{radius:e=1,segments:r=32,thetaStart:i=0,thetaEnd:n=Math.PI*2}=t,s=[],o=[],h=[];o.push(0,0,0),h.push(0,0);for(let l=0,u=3;l<=r;l++,u+=3){const m=i+l/r*n,p=Math.cos(m)*e,y=Math.sin(m)*e;o.push(p,y,0);const v=(o[u]/e+1)/2,A=(o[u+1]/e+1)/2;h.push(v,A)}for(let l=1;l<=r;l++)s.push(l,l+1,0);const c=5,f=r>65536?new Uint32Array(s):new Uint16Array(s),d=new Float32Array((r+1)*3*c);for(let l=0;l<=r+1;l++)d[l*5+0]=o[l*3+0],d[l*5+1]=o[l*3+1],d[l*5+2]=o[l*3+2],d[l*5+3]=h[l*2+0],d[l*5+4]=h[l*2+1];return{radius:e,interleavedArray:d,vertexCount:r*3,vertexStride:c,indicesArray:f}},or=sr,hr=(t={})=>{const{radius:e=1,segments:r=32,thetaStart:i=0,thetaEnd:n=Math.PI*2}=t,s=3,o=new Float32Array(r*s),h=n/r;for(let c=0;c<r;c++){const f=Math.cos(i+c*h)*e,d=Math.sin(i+c*h)*e;o[c*3+0]=f,o[c*3+1]=d,o[c*3+2]=0}return{radius:e,vertexCount:r,vertexStride:s,interleavedArray:o}},cr=hr,lr=(t,e,r,i,n,s)=>{const o=new Float32Array(9);return o[0]=t,o[1]=e,o[2]=0,o[3]=r,o[4]=i,o[5]=0,o[6]=n,o[7]=s,o[8]=0,{vertexCount:3,vertexStride:3,interleavedArray:o}},dr=lr,ur=class{constructor(){R(this,"upVector",it(0,1,0));R(this,"position",it(0,0,0));R(this,"lookAt",it(0,0,0));R(this,"projectionMatrix",$());R(this,"viewMatrix",$());R(this,"viewMatrixInverse",$());R(this,"projectionViewMatrix",$())}updateViewMatrix(){return Ve(this.viewMatrix,this.position,this.lookAt,this.upVector),Ht(this.viewMatrixInverse,this.viewMatrix),this}updateProjectionMatrix(){return this}updateProjectionViewMatrix(){return this.updateViewMatrix(),this.updateProjectionMatrix(),jt(this.projectionViewMatrix,this.projectionMatrix,this.viewMatrix),this}},fr=class extends ur{constructor(e,r,i,n,s,o){super();R(this,"left");R(this,"right");R(this,"bottom");R(this,"top");R(this,"near");R(this,"far");this.left=e,this.right=r,this.top=i,this.bottom=n,this.near=s,this.far=o,this.updateProjectionMatrix()}updateProjectionMatrix(){return We(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far),this}},mr=class{constructor(){R(this,"position",it(0,0,0));R(this,"rotation",it(0,0,0));R(this,"scale",it(1,1,1));R(this,"modelMatrix",$());R(this,"shouldUpdate",!0)}copyFromMatrix(t){return Wt(this.modelMatrix,t),this.shouldUpdate=!1,this}setPosition(t){return Tt(this.position,t),this.shouldUpdate=!0,this}setScale(t){return Tt(this.scale,t),this.shouldUpdate=!0,this}setRotation(t){return Tt(this.rotation,t),this.shouldUpdate=!0,this}updateModelMatrix(){return Vt(this.modelMatrix),Se(this.modelMatrix,this.modelMatrix,this.position),Ce(this.modelMatrix,this.modelMatrix,this.rotation[0]),Oe(this.modelMatrix,this.modelMatrix,this.rotation[1]),Ye(this.modelMatrix,this.modelMatrix,this.rotation[2]),De(this.modelMatrix,this.modelMatrix,this.scale),this.shouldUpdate=!1,this}},pr=class extends mr{constructor(e=void 0){super();R(this,"parentNode",null);R(this,"_children",[]);R(this,"_visible",!0);R(this,"worldMatrix",$());R(this,"normalMatrix",$());R(this,"uid",je(9));R(this,"name");this.name=e}get visible(){return this._visible}set visible(e){this._visible=e}get children(){return this._children}get siblings(){return this.parentNode?this.parentNode._children:[]}get levelIndex(){let e=0,r=this.parentNode;for(;r;)e++,r=r.parentNode;return e}setParent(e=null){if(this.parentNode){const r=this.parentNode._children.indexOf(this);r>=0&&this.parentNode._children.splice(r,1)}return e&&e.addChild(this),this.parentNode=e,this}addChild(e){return this._children.push(e),this}updateWorldMatrix(e=null){this.shouldUpdate&&this.updateModelMatrix(),e?jt(this.worldMatrix,e,this.modelMatrix):Wt(this.worldMatrix,this.modelMatrix),Ht(this.normalMatrix,this.worldMatrix),Ne(this.normalMatrix,this.normalMatrix);for(let r=0;r<this._children.length;r++)this._children[r].updateWorldMatrix(this.worldMatrix);return this}traverse(e,r=0){e(this,r),r++;for(let i=0;i<this._children.length;i++)this._children[i].traverse(e,r)}findChild(e){if(e(this))return this;let r=null;for(let i=0;i<this._children.length&&!(r=this._children[i].findChild(e));i++);return r}findChildByName(e){if(this.name===e)return this;let r=null;for(let i=0;i<this._children.length&&!(r=this._children[i].findChildByName(e));i++);return r}findParent(e){if(e(this))return this;let r=null,i=this.parentNode;for(;i&&!(r=i.findParent(e));)i=i==null?void 0:i.parentNode;return r}findParentByName(e){if(this.name===e)return this;let r=null,i=this.parentNode;for(;i&&!(r=i.findParentByName(e));)i=i==null?void 0:i.parentNode;return r}render(){if(this._visible)for(let e=0;e<this._children.length;e++)this._children[e].render()}},nt,Et=class extends pr{constructor(t,e,r,i={},n){if(super(n),z(this,"gl"),z(this,"vao"),z(this,"vertexCount"),yt(this,nt,new Map),z(this,"boundingBox"),z(this,"program"),this.gl=t,this.vao=t.createVertexArray(),this.program=Ut(t,e,r,i),this.program.__SPECTOR_Metadata={name:n,shaderDefines:i},!this.setUniform(Et.WORLD_MATRIX_UNIFORM_NAME,{type:t.FLOAT_MAT4}))throw new Error(`Each Drawable is expected to have a mat4 ${Et.WORLD_MATRIX_UNIFORM_NAME} implemented in shader`)}setUniform(t,{type:e,value:r}){const i=this.gl;let n;if(n=B(this,nt).get(t))n.value=r;else{const s=i.getUniformLocation(this.program,t);if(!s)return console.error(`uniform with name ${t} was not found in the program`),!1;n={type:e,location:s,value:r},B(this,nt).set(t,n)}return r!=null&&(i.useProgram(this.program),Qt(i,n.type,n.location,r)),!0}updateUniform(t,e){let r;if(r=this.getUniform(t)){r.value=e;const i=this.gl;return i.useProgram(this.program),Qt(i,r.type,r.location,e),!0}return!1}getUniform(t){let e;return(e=B(this,nt).get(t))?e:(console.error("can't locate uniform with that name"),null)}updateWorldMatrix(t){return super.updateWorldMatrix(t),this.updateUniform(Et.WORLD_MATRIX_UNIFORM_NAME,this.worldMatrix),this}destroy(){B(this,nt).clear();const t=this.gl;t.deleteVertexArray(this.vao),t.deleteProgram(this.program)}},gr=Et;nt=new WeakMap,z(gr,"WORLD_MATRIX_UNIFORM_NAME","u_worldMatrix");var vr=document.createElement("canvas"),Zt=vr.getContext("webgl2"),k=Zt.MAX_TEXTURE_SIZE,_t=Zt.RGB,Lt,b,Nt=!1,G,at,st,Pt=class{constructor(){if(yt(this,G,[]),yt(this,at,[]),yt(this,st,document.createElement("div")),Nt){const t=document.createElement("style"),e="hwoa-rang-texture-atlas-debug";t.setAttribute("type","text/css");const r=`
        #${e} {
          position: fixed;
          bottom: 1rem;
          right: 1rem;
          transform-origin: 100% 100%;
          width: 400px;
          max-height: 100vh;
          overflow: scroll;
        }
        #${e} canvas {
          max-width: 100%;
        }
      `;t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t),Qe(this,st,document.createElement("div")),B(this,st).setAttribute("id",e),document.body.appendChild(B(this,st))}}static set debugMode(t){Nt=t}static get textureSize(){return k}static set textureSize(t){k=t}static set textureFormat(t){_t=t}static set gl(t){b=t}static getInstance(){if(!b)throw new Error("You must provide a WebGL2RenderingContext first via setting the TextureAtlas.gl property!");return Lt||(Lt=new Pt),Lt}pack(t,e,r=1){const i=()=>{const u=document.createElement("canvas");B(this,st).appendChild(u),u.width=k,u.height=k;const m=b.createTexture();b.bindTexture(b.TEXTURE_2D,m),b.texParameterf(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR),b.texImage2D(b.TEXTURE_2D,0,_t,k,k,0,_t,b.UNSIGNED_BYTE,null),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null);const p=new qe(u);return B(this,G).push(p),B(this,at).push(m),p};let n=B(this,G)[B(this,G).length-1];n||(n=i());const s=r===1?e:Pt.scaleDownDrawableByFactor(e,r);n.pack(t,s)||(n=i(),n.pack(t,s));const o=n.uv()[t];for(let u=0;u<o.length;u++)o[u][0]*=k,o[u][1]*=k;const h=B(this,at)[B(this,at).length-1],c=o[0][0],f=o[0][1],d=o[2][0]-o[0][0],l=o[2][1]-o[0][1];return b.bindTexture(b.TEXTURE_2D,h),b.texSubImage2D(b.TEXTURE_2D,0,c,f,d,l,_t,b.UNSIGNED_BYTE,s),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null),this}getUv2(t){let e=-1;for(let r=0;r<B(this,G).length;r++){const i=B(this,G)[r].uv2()[t];if(i){e=r;const n=B(this,at)[e];return[i,n]}}throw new Error("Can't get uvs")}},Ar=Pt;G=new WeakMap,at=new WeakMap,st=new WeakMap,z(Ar,"scaleDownDrawableByFactor",(t,e)=>{const r=document.createElement("canvas"),i=t instanceof HTMLImageElement?t.naturalWidth:t.width,n=t instanceof HTMLImageElement?t.naturalHeight:t.height;r.width=i/e,r.height=n/e,Nt&&console.log(`Scaled ${i}x${n} project image to ${r.width}x${r.height}`);const s=r.getContext("2d");return s.imageSmoothingQuality="high",s.drawImage(t,0,0,i,n,0,0,r.width,r.height),r});var te=`#version 300 es

-- DEFINES_HOOK --

uniform mat4 uProjectionViewMatrix;

in vec4 aInstanceTransform;
in vec4 aPosition;
in vec4 aColor;
in vec2 aUV;

out vec2 vUV;
out vec4 vColor;

vec2 rotate(vec2 v, float a) {
	float s = sin(a);
	float c = cos(a);
	mat2 m = mat2(c, s, -s, c);
	return m * v;
}

void main () {
  vec4 pos = aPosition;

  #ifdef IS_LINES
    if (aPosition.x == 0.0f) {
      pos.xy = aInstanceTransform.xy;
    } else {
      pos.xy = aInstanceTransform.zw;
    }
  #else
    vec2 offset = aInstanceTransform.xy;
    float angle = aInstanceTransform.z;
    float scale = aInstanceTransform.w;

    pos.xy *= scale;
    pos.xy = rotate(pos.xy, angle);
    pos.xy += offset;
  #endif
  
  gl_Position = uProjectionViewMatrix * pos;

  vUV = aUV;
  vColor = aColor;
}`,ee=`#version 300 es
precision highp float;

-- DEFINES_HOOK --

in vec2 vUV;
in vec4 vColor;

out vec4 finalColor;

void main () {
  #ifdef LINES
    finalColor = vec4(vec3(0.8), 1.0);
  #else
    finalColor = vColor;
  #endif
}`;const xr=await Te(()=>import("./Phy2D-8i1OeZ3-.js"),__vite__mapDeps([]),import.meta.url),{Vec2:ot,Body:q,World:yr,vector$Vec2$:Er}=await xr.default(),_r=0,re=1,ie=2,ne=new ot(-1e3,-1e3),ae=Math.min(innerWidth,1920),wr=innerWidth-ae;let se=0;const K=document.getElementById("c");Dr();const a=K.getContext("webgl2"),St=new Le(a),wt=new fr(0,innerWidth,0,innerHeight,.1,10);wt.position[2]=1,wt.updateProjectionViewMatrix();const L=Ut(a,te,ee,{}),Rt=Ut(a,te,ee,{LINES:!0}),J=a.getAttribLocation(L,"aInstanceTransform"),dt=a.getAttribLocation(L,"aPosition"),Dt=a.getAttribLocation(L,"aUV"),Q=a.getAttribLocation(L,"aColor");let Ct=a.getUniformLocation(L,"uProjectionViewMatrix");a.useProgram(L),a.uniformMatrix4fv(Ct,!1,wt.projectionViewMatrix),Ct=a.getUniformLocation(Rt,"uProjectionViewMatrix"),a.useProgram(Rt),a.uniformMatrix4fv(Ct,!1,wt.projectionViewMatrix);const Ot=[],F=document.createElement("canvas");F.width=innerWidth,F.height=innerHeight,F.style.setProperty("position","fixed"),F.style.setProperty("bottom","0px"),F.style.setProperty("left","0px"),F.style.setProperty("z-index","999"),F.style.setProperty("border","1px solid blue"),F.classList.add("fadeable"),document.body.appendChild(F);const I=F.getContext("2d"),oe=1;I.font=`bold ${oe}px Helvetica`;const he="2024",Rr=oe*(F.width*.77/I.measureText(he).width);I.font=`bold ${Rr}px Helvetica`,I.textAlign="center",I.textBaseline="middle",I.fillStyle="white",I.save(),I.translate(F.width*.5,F.height*.5),I.scale(1,1),I.fillStyle="black",I.fillText(he,0,0),I.restore();const br=new Uint32Array(I.getImageData(0,0,F.width,F.height).data.buffer),Fr=10,Mr=10;I.globalAlpha=.2;for(let t=0;t<F.width;t+=Fr)for(let e=0;e<F.height;e+=Mr)br[e*F.width+t]&&Ot.push({x:t,y:e});const N=[],P=[],W=[],Z=new yr(-7,innerWidth,innerHeight);Z.gravity=-10;const ce=new q(innerWidth,1,innerWidth*.5,innerHeight,0);ce.restitution=1;const Tr=new q(1,innerHeight*2,0,innerHeight*.5,0),Br=new q(1,innerHeight*2,innerWidth-1,innerHeight*.5,0);Z.AddBody(ce),Z.AddBody(Tr),Z.AddBody(Br);const ht=new q(60,-1e3,-100,0);ht.restitution=.3,Z.AddBody(ht);let tt=0;const bt=innerHeight;for(;tt<bt;){let t=0,e=0;const r=Math.cos(tt/bt*Math.PI*2);for(;e<ae;){let i=(r*21+36)*.5,n=i+Math.random()*i;const s=n*.5+e+wr*.5,o=tt;let h,c=Math.random()<.9?re:ie;tt>bt*.3&&tt<bt*.7&&(c=Math.floor(Math.random()*2));const f=tt-innerHeight*1.5;if(c===re)h=new q(n*1.015,s,f,1),h.scale=n,P.push(h);else if(c===_r)h=new q(n*2*1.015,n*2*1.015,s,f,2),h.scale=n*2,N.push(h);else if(c===ie){const d=new Er;d.push_back(new ot(-.5*n*2,.5*n*2)),d.push_back(new ot(0*n*2,-.5*n*2)),d.push_back(new ot(.5*n*2,.5*n*2)),h=new q(d,s,f,10,0,0),h.scale=n*2,W.push(h)}n>t&&(t=n),h.restitution=.1,h.color=1,Z.AddBody(h);for(let d=0;d<Ot.length;d++){const{x:l,y:u}=Ot[d],m=l-s,p=u-o*1;Math.sqrt(m*m+p*p)<10&&(h.color=0)}e+=n*2}tt+=t*1.4}const S=new Float32Array(N.length*4),Ft=new Float32Array(N.length*3),D=new Float32Array(P.length*4),ut=new Float32Array(P.length*3),C=new Float32Array(W.length*4),ft=new Float32Array(W.length*3);for(let t=0;t<N.length;t++){const e=N[t];S[t*4+0]=e.position.x,S[t*4+1]=e.position.y,S[t*4+2]=0,S[t*4+3]=e.scale,Ft[t*3+0]=0,Ft[t*3+1]=e.color,Ft[t*3+2]=0}for(let t=0;t<P.length;t++){const e=P[t];D[t*4+0]=e.position.x,D[t*4+1]=e.position.y,D[t*4+2]=0,D[t*4+3]=e.scale,ut[t*3+0]=0,ut[t*3+1]=e.color,ut[t*3+2]=0}for(let t=0;t<W.length;t++){const e=W[t];C[t*4+0]=e.position.x,C[t*4+1]=e.position.y,C[t*4+2]=0,C[t*4+3]=e.scale,ft[t*3+0]=0,ft[t*3+1]=e.color,ft[t*3+2]=0}const mt=ir(),le=ar(),de=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,de),a.bufferData(a.ARRAY_BUFFER,S,a.DYNAMIC_DRAW);const ue=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ue),a.bufferData(a.ARRAY_BUFFER,Ft,a.STATIC_DRAW);const fe=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,fe),a.bufferData(a.ARRAY_BUFFER,mt.interleavedArray,a.STATIC_DRAW);const me=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,me),a.bufferData(a.ARRAY_BUFFER,le.interleavedArray,a.STATIC_DRAW);const pe=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,pe),a.bufferData(a.ELEMENT_ARRAY_BUFFER,mt.indicesArray,a.STATIC_DRAW);const pt=or(),ge=cr(),ve=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ve),a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW);const Ae=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Ae),a.bufferData(a.ARRAY_BUFFER,ut,a.STATIC_DRAW);const xe=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,xe),a.bufferData(a.ARRAY_BUFFER,pt.interleavedArray,a.STATIC_DRAW);const ye=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ye),a.bufferData(a.ARRAY_BUFFER,ge.interleavedArray,a.STATIC_DRAW);const Ee=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Ee),a.bufferData(a.ELEMENT_ARRAY_BUFFER,pt.indicesArray,a.STATIC_DRAW);const _e=dr(-.5,.5,0,-.5,.5,.5),we=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,we),a.bufferData(a.ARRAY_BUFFER,C,a.DYNAMIC_DRAW);const Re=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Re),a.bufferData(a.ARRAY_BUFFER,ft,a.STATIC_DRAW);const be=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,be),a.bufferData(a.ARRAY_BUFFER,_e.interleavedArray,a.STATIC_DRAW);const Yt=matchMedia("(orientation: portrait)"),Ir=Yt.matches;Yt.addEventListener("change",()=>{Ir&&!Yt.matches&&location.reload()}),setTimeout(()=>{F.classList.add("faded"),F.addEventListener("transitionend",()=>{F.parentNode.removeChild(F),requestAnimationFrame(Me)})},250),document.body.addEventListener("mousedown",Ur),document.body.addEventListener("mouseup",Lr),document.body.addEventListener("touchmove",Nr),document.body.addEventListener("touchend",Pr);function Ur(){document.body.addEventListener("mousemove",Fe)}function Fe(t){let e=t.pageX,r=t.pageY;e>innerWidth*.95&&(e=innerWidth*.95),e<innerWidth*.05&&(e=innerWidth*.05),r>innerHeight*.85&&(r=innerHeight*.85),r<innerHeight*.15&&(r=innerHeight*.15),ht.position=new ot(e,r)}function Lr(){document.body.removeEventListener("mousemove",Fe),ht.position=ne}function Nr(t){ht.position=new ot(t.pageX,t.pageY),t.preventDefault()}function Pr(){ht.position=ne}function Me(t){const e=Math.min((t-se)*.001,.01667);se=t,St.begin("Simulation"),Z.Update(e);for(let r=0;r<P.length;r++){const i=P[r];D[r*4+0]=i.position.x,D[r*4+1]=i.position.y,D[r*4+2]=i.rotation}for(let r=0;r<N.length;r++){const i=N[r];S[r*4+0]=i.position.x,S[r*4+1]=i.position.y,S[r*4+2]=i.rotation}for(let r=0;r<W.length;r++){const i=W[r];C[r*4+0]=i.position.x,C[r*4+1]=i.position.y,C[r*4+2]=i.rotation}a.viewport(0,0,K.width,K.height),a.clearColor(.6,.6,.6,1),a.clear(a.COLOR_BUFFER_BIT),a.enableVertexAttribArray(J),a.enableVertexAttribArray(Q),a.enableVertexAttribArray(dt),a.enableVertexAttribArray(Dt),Sr(),St.end("Simulation"),St.nextFrame(t),requestAnimationFrame(Me)}function Sr(){a.useProgram(L),a.bindBuffer(a.ARRAY_BUFFER,de),a.bufferData(a.ARRAY_BUFFER,S,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,ue),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,fe),a.vertexAttribPointer(dt,3,a.FLOAT,!1,mt.vertexStride*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(Dt,2,a.FLOAT,!1,mt.vertexStride*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,pe),a.drawElementsInstanced(a.TRIANGLES,mt.vertexCount,a.UNSIGNED_SHORT,0,N.length),a.useProgram(Rt),a.bindBuffer(a.ARRAY_BUFFER,me),a.vertexAttribPointer(dt,3,a.FLOAT,!1,0,0),a.drawArraysInstanced(a.LINE_LOOP,0,le.vertexCount,N.length),a.useProgram(L),a.bindBuffer(a.ARRAY_BUFFER,ve),a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,Ae),a.bufferData(a.ARRAY_BUFFER,ut,a.STATIC_DRAW),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,xe),a.vertexAttribPointer(dt,3,a.FLOAT,!1,pt.vertexStride*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(Dt,2,a.FLOAT,!1,pt.vertexStride*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Ee),a.drawElementsInstanced(a.TRIANGLES,pt.vertexCount,a.UNSIGNED_SHORT,0,P.length),a.useProgram(Rt),a.bindBuffer(a.ARRAY_BUFFER,ye),a.drawArraysInstanced(a.LINE_LOOP,1,ge.vertexCount,P.length),a.useProgram(L),a.bindBuffer(a.ARRAY_BUFFER,we),a.bufferData(a.ARRAY_BUFFER,C,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,Re),a.bufferData(a.ARRAY_BUFFER,ft,a.STATIC_DRAW),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,be),a.vertexAttribPointer(dt,3,a.FLOAT,!1,0,0),a.drawArraysInstanced(a.TRIANGLES,0,_e.vertexCount,W.length)}function Dr(){K.width=innerWidth*devicePixelRatio,K.height=innerHeight*devicePixelRatio,K.style.setProperty("width",`${innerWidth}px`),K.style.setProperty("height",`${innerHeight}px`)}})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
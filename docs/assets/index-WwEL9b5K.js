var Sr=Object.defineProperty;var Dr=(j,U,Y)=>U in j?Sr(j,U,{enumerable:!0,configurable:!0,writable:!0,value:Y}):j[U]=Y;var R=(j,U,Y)=>(Dr(j,typeof U!="symbol"?U+"":U,Y),Y);(async()=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const j="modulepreload",U=function(t){return"/"+t},Y={},Me=function(t,e,r){let i=Promise.resolve();if(e&&e.length>0){const n=document.getElementsByTagName("link");i=Promise.all(e.map(o=>{if(o=U(o),o in Y)return;Y[o]=!0;const s=o.endsWith(".css"),h=s?'[rel="stylesheet"]':"";if(r)for(let d=n.length-1;d>=0;d--){const f=n[d];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${h}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":j,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})};var Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kt={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(Te,function(){var r=`<div class="gl-box">
  <svg viewBox="0 0 55 60">
    <text x="27" y="56" class="gl-fps">00 FPS</text>
    <text x="28" y="8" class="gl-mem"></text>
    <rect x="0" y="14" rx="4" ry="4" width="55" height="32"></rect>
    <polyline class="gl-chart"></polyline>
  </svg>
  <svg viewBox="0 0 14 60" class="gl-cpu-svg">
    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>
    <line x1="7" y1="38" x2="7" y2="11" class="gl-cpu" stroke-dasharray="0 27"/>
    <path d="M5.35 43c-.464 0-.812.377-.812.812v1.16c-.783.1972-1.421.812-1.595 1.624h-1.16c-.435 0-.812.348-.812.812s.348.812.812.812h1.102v1.653H1.812c-.464 0-.812.377-.812.812 0 .464.377.812.812.812h1.131c.1943.783.812 1.392 1.595 1.595v1.131c0 .464.377.812.812.812.464 0 .812-.377.812-.812V53.15h1.653v1.073c0 .464.377.812.812.812.464 0 .812-.377.812-.812v-1.131c.783-.1943 1.392-.812 1.595-1.595h1.131c.464 0 .812-.377.812-.812 0-.464-.377-.812-.812-.812h-1.073V48.22h1.102c.435 0 .812-.348.812-.812s-.348-.812-.812-.812h-1.16c-.1885-.783-.812-1.421-1.595-1.624v-1.131c0-.464-.377-.812-.812-.812-.464 0-.812.377-.812.812v1.073H6.162v-1.073c0-.464-.377-.812-.812-.812zm.58 3.48h2.088c.754 0 1.363.609 1.363 1.363v2.088c0 .754-.609 1.363-1.363 1.363H5.93c-.754 0-1.363-.609-1.363-1.363v-2.088c0-.754.609-1.363 1.363-1.363z"/>
  </svg>
  <svg viewBox="0 0 14 60" class="gl-gpu-svg">
    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>
    <line x1="7" y1="38" x2="7" y2="11" class="gl-gpu" stroke-dasharray="0 27"/>
    <path d="M1.94775 43.3772a.736.736 0 10-.00416 1.472c.58535.00231.56465.1288.6348.3197.07015.18975.04933.43585.04933.43585l-.00653.05405v8.671a.736.736 0 101.472 0v-1.4145c.253.09522.52785.1495.81765.1495h5.267c1.2535 0 2.254-.9752 2.254-2.185v-3.105c0-1.2075-1.00625-2.185-2.254-2.185h-5.267c-.28865 0-.5635.05405-.8165.1495.01806-.16445.04209-.598-.1357-1.0787-.22425-.6072-.9499-1.2765-2.0125-1.2765zm2.9095 3.6455c.42435 0 .7659.36225.7659.8119v2.9785c0 .44965-.34155.8119-.7659.8119s-.7659-.36225-.7659-.8119v-2.9785c0-.44965.34155-.8119.7659-.8119zm4.117 0a2.3 2.3 0 012.3 2.3 2.3 2.3 0 01-2.3 2.3 2.3 2.3 0 01-2.3-2.3 2.3 2.3 0 012.3-2.3z"/>
  </svg>
</div>`,i=`#gl-bench {
  position:absolute;
  left:0;
  top:0;
  z-index:1000;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

#gl-bench div {
  position: relative;
  display: block;
  margin: 4px;
  padding: 0 7px 0 10px;
  background: #6c6;
  border-radius: 15px;
  cursor: pointer;
  opacity: 0.9;
}

#gl-bench svg {
  height: 60px;
  margin: 0 -1px;
}

#gl-bench text {
  font-size: 12px;
  font-family: Helvetica,Arial,sans-serif;
  font-weight: 700;
  dominant-baseline: middle;
  text-anchor: middle;
}

#gl-bench .gl-mem {
  font-size: 9px;
}

#gl-bench line {
  stroke-width: 5;
  stroke: #112211;
  stroke-linecap: round;
}

#gl-bench polyline {
  fill: none;
  stroke: #112211;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-width: 3.5;
}

#gl-bench rect {
  fill: #448844;
}

#gl-bench .opacity {
  stroke: #448844;
}
`;class n{constructor(s,h={}){this.css=i,this.svg=r,this.paramLogger=()=>{},this.chartLogger=()=>{},this.chartLen=20,this.chartHz=20,this.names=[],this.cpuAccums=[],this.gpuAccums=[],this.activeAccums=[],this.chart=new Array(this.chartLen),this.now=()=>performance&&performance.now?performance.now():Date.now(),this.updateUI=()=>{[].forEach.call(this.nodes["gl-gpu-svg"],u=>{u.style.display=this.trackGPU?"inline":"none"})},Object.assign(this,h),this.detected=0,this.finished=[],this.isFramebuffer=0,this.frameId=0;let c,d=0,f,l=u=>{++d<20?c=requestAnimationFrame(l):(this.detected=Math.ceil(1e3*d/(u-f)/70),cancelAnimationFrame(c)),f||(f=u)};if(requestAnimationFrame(l),s){const u=async(g,x)=>Promise.resolve(setTimeout(()=>{s.getError();const v=this.now()-g;x.forEach((y,w)=>{y&&(this.gpuAccums[w]+=v)})},0)),m=(g,x,v)=>function(){const y=x.now();g.apply(v,arguments),x.trackGPU&&x.finished.push(u(y,x.activeAccums.slice(0)))};["drawArrays","drawElements","drawArraysInstanced","drawBuffers","drawElementsInstanced","drawRangeElements"].forEach(g=>{s[g]&&(s[g]=m(s[g],this,s))}),s.getExtension=((g,x)=>function(){let v=g.apply(s,arguments);return v&&["drawElementsInstancedANGLE","drawBuffersWEBGL"].forEach(y=>{v[y]&&(v[y]=m(v[y],x,v))}),v})(s.getExtension,this)}if(!this.withoutUI){this.dom||(this.dom=document.body);let u=document.createElement("div");u.id="gl-bench",this.dom.appendChild(u),this.dom.insertAdjacentHTML("afterbegin",'<style id="gl-bench-style">'+this.css+"</style>"),this.dom=u,this.dom.addEventListener("click",()=>{this.trackGPU=!this.trackGPU,this.updateUI()}),this.paramLogger=((m,g,x)=>{const v=["gl-cpu","gl-gpu","gl-mem","gl-fps","gl-gpu-svg","gl-chart"],y=Object.assign({},v);return v.forEach(w=>y[w]=g.getElementsByClassName(w)),this.nodes=y,(w,E,A,p,_,T,O)=>{y["gl-cpu"][w].style.strokeDasharray=(E*.27).toFixed(0)+" 100",y["gl-gpu"][w].style.strokeDasharray=(A*.27).toFixed(0)+" 100",y["gl-mem"][w].innerHTML=x[w]?x[w]:p?"mem: "+p.toFixed(0)+"mb":"",y["gl-fps"][w].innerHTML=_.toFixed(0)+" FPS",m(x[w],E,A,p,_,T,O)}})(this.paramLogger,this.dom,this.names),this.chartLogger=((m,g)=>{let x={"gl-chart":g.getElementsByClassName("gl-chart")};return(v,y,w)=>{let E="",A=y.length;for(let p=0;p<A;p++){let _=(w+p+1)%A;y[_]!=null&&(E=E+" "+(55*p/(A-1)).toFixed(1)+","+(45-y[_]*22/60/this.detected).toFixed(1))}x["gl-chart"][v].setAttribute("points",E),m(this.names[v],y,w)}})(this.chartLogger,this.dom)}}addUI(s){this.names.indexOf(s)==-1&&(this.names.push(s),this.dom&&(this.dom.insertAdjacentHTML("beforeend",this.svg),this.updateUI()),this.cpuAccums.push(0),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFrame(s){this.frameId++;const h=s||this.now();if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=h;else{let c=h-this.paramTime;if(c>=1e3){const d=this.frameId-this.paramFrame,f=d/c*1e3;for(let l=0;l<this.names.length;l++){const u=this.cpuAccums[l]/c*100,m=this.gpuAccums[l]/c*100,g=performance&&performance.memory?performance.memory.usedJSHeapSize/(1<<20):0;this.paramLogger(l,u,m,g,f,c,d),this.cpuAccums[l]=0,Promise.all(this.finished).then(()=>{this.gpuAccums[l]=0,this.finished=[]})}this.paramFrame=this.frameId,this.paramTime=h}}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=h,this.circularId=0;else{let c=h-this.chartTime,d=this.chartHz*c/1e3;for(;--d>0&&this.detected;){const f=(this.frameId-this.chartFrame)/c*1e3;this.chart[this.circularId%this.chartLen]=f;for(let l=0;l<this.names.length;l++)this.chartLogger(l,this.chart,this.circularId);this.circularId++,this.chartFrame=this.frameId,this.chartTime=h}}}begin(s){this.updateAccums(s)}end(s){this.updateAccums(s)}updateAccums(s){let h=this.names.indexOf(s);h==-1&&(h=this.names.length,this.addUI(s));const c=this.now(),d=c-this.t0;for(let f=0;f<h+1;f++)this.activeAccums[f]&&(this.cpuAccums[f]+=d);this.activeAccums[h]=!this.activeAccums[h],this.t0=c}}return n})})(kt);var Ie=kt.exports;const Ue=Be(Ie);var Mt=1e-6,ct=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function $(){var t=new ct(16);return ct!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Wt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Vt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ne(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],o=e[6],s=e[7],h=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=n,t[13]=s,t[14]=h}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ht(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],h=e[5],c=e[6],d=e[7],f=e[8],l=e[9],u=e[10],m=e[11],g=e[12],x=e[13],v=e[14],y=e[15],w=r*h-i*s,E=r*c-n*s,A=r*d-o*s,p=i*c-n*h,_=i*d-o*h,T=n*d-o*c,O=f*x-l*g,et=f*v-u*g,V=f*y-m*g,rt=l*v-u*x,H=l*y-m*x,gt=u*y-m*v,M=w*gt-E*H+A*rt+p*V-_*et+T*O;return M?(M=1/M,t[0]=(h*gt-c*H+d*rt)*M,t[1]=(n*H-i*gt-o*rt)*M,t[2]=(x*T-v*_+y*p)*M,t[3]=(u*_-l*T-m*p)*M,t[4]=(c*V-s*gt-d*et)*M,t[5]=(r*gt-n*V+o*et)*M,t[6]=(v*A-g*T-y*E)*M,t[7]=(f*T-u*A+m*E)*M,t[8]=(s*H-h*V+d*O)*M,t[9]=(i*V-r*H-o*O)*M,t[10]=(g*_-x*A+y*w)*M,t[11]=(l*A-f*_-m*w)*M,t[12]=(h*et-s*rt-c*O)*M,t[13]=(r*rt-i*et+n*O)*M,t[14]=(x*E-g*p-v*w)*M,t[15]=(f*p-l*E+u*w)*M,t):null}function Le(t,e,r){var i=e[0],n=e[1],o=e[2],s=e[3],h=e[4],c=e[5],d=e[6],f=e[7],l=e[8],u=e[9],m=e[10],g=e[11],x=e[12],v=e[13],y=e[14],w=e[15],E=r[0],A=r[1],p=r[2],_=r[3];return t[0]=E*i+A*h+p*l+_*x,t[1]=E*n+A*c+p*u+_*v,t[2]=E*o+A*d+p*m+_*y,t[3]=E*s+A*f+p*g+_*w,E=r[4],A=r[5],p=r[6],_=r[7],t[4]=E*i+A*h+p*l+_*x,t[5]=E*n+A*c+p*u+_*v,t[6]=E*o+A*d+p*m+_*y,t[7]=E*s+A*f+p*g+_*w,E=r[8],A=r[9],p=r[10],_=r[11],t[8]=E*i+A*h+p*l+_*x,t[9]=E*n+A*c+p*u+_*v,t[10]=E*o+A*d+p*m+_*y,t[11]=E*s+A*f+p*g+_*w,E=r[12],A=r[13],p=r[14],_=r[15],t[12]=E*i+A*h+p*l+_*x,t[13]=E*n+A*c+p*u+_*v,t[14]=E*o+A*d+p*m+_*y,t[15]=E*s+A*f+p*g+_*w,t}function Pe(t,e,r){var i=r[0],n=r[1],o=r[2],s,h,c,d,f,l,u,m,g,x,v,y;return e===t?(t[12]=e[0]*i+e[4]*n+e[8]*o+e[12],t[13]=e[1]*i+e[5]*n+e[9]*o+e[13],t[14]=e[2]*i+e[6]*n+e[10]*o+e[14],t[15]=e[3]*i+e[7]*n+e[11]*o+e[15]):(s=e[0],h=e[1],c=e[2],d=e[3],f=e[4],l=e[5],u=e[6],m=e[7],g=e[8],x=e[9],v=e[10],y=e[11],t[0]=s,t[1]=h,t[2]=c,t[3]=d,t[4]=f,t[5]=l,t[6]=u,t[7]=m,t[8]=g,t[9]=x,t[10]=v,t[11]=y,t[12]=s*i+f*n+g*o+e[12],t[13]=h*i+l*n+x*o+e[13],t[14]=c*i+u*n+v*o+e[14],t[15]=d*i+m*n+y*o+e[15]),t}function Se(t,e,r){var i=r[0],n=r[1],o=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function De(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[4],s=e[5],h=e[6],c=e[7],d=e[8],f=e[9],l=e[10],u=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+d*i,t[5]=s*n+f*i,t[6]=h*n+l*i,t[7]=c*n+u*i,t[8]=d*n-o*i,t[9]=f*n-s*i,t[10]=l*n-h*i,t[11]=u*n-c*i,t}function Ce(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],s=e[1],h=e[2],c=e[3],d=e[8],f=e[9],l=e[10],u=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-d*i,t[1]=s*n-f*i,t[2]=h*n-l*i,t[3]=c*n-u*i,t[8]=o*i+d*n,t[9]=s*i+f*n,t[10]=h*i+l*n,t[11]=c*i+u*n,t}function Oe(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],s=e[1],h=e[2],c=e[3],d=e[4],f=e[5],l=e[6],u=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+d*i,t[1]=s*n+f*i,t[2]=h*n+l*i,t[3]=c*n+u*i,t[4]=d*n-o*i,t[5]=f*n-s*i,t[6]=l*n-h*i,t[7]=u*n-c*i,t}function Ye(t,e,r,i,n,o,s){var h=1/(e-r),c=1/(i-n),d=1/(o-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*h,t[13]=(n+i)*c,t[14]=(s+o)*d,t[15]=1,t}var ke=Ye;function We(t,e,r,i){var n,o,s,h,c,d,f,l,u,m,g=e[0],x=e[1],v=e[2],y=i[0],w=i[1],E=i[2],A=r[0],p=r[1],_=r[2];return Math.abs(g-A)<Mt&&Math.abs(x-p)<Mt&&Math.abs(v-_)<Mt?Vt(t):(f=g-A,l=x-p,u=v-_,m=1/Math.hypot(f,l,u),f*=m,l*=m,u*=m,n=w*u-E*l,o=E*f-y*u,s=y*l-w*f,m=Math.hypot(n,o,s),m?(m=1/m,n*=m,o*=m,s*=m):(n=0,o=0,s=0),h=l*s-u*o,c=u*n-f*s,d=f*o-l*n,m=Math.hypot(h,c,d),m?(m=1/m,h*=m,c*=m,d*=m):(h=0,c=0,d=0),t[0]=n,t[1]=h,t[2]=f,t[3]=0,t[4]=o,t[5]=c,t[6]=l,t[7]=0,t[8]=s,t[9]=d,t[10]=u,t[11]=0,t[12]=-(n*g+o*x+s*v),t[13]=-(h*g+c*x+d*v),t[14]=-(f*g+l*x+u*v),t[15]=1,t)}var jt=Le;function Ve(){var t=new ct(3);return ct!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function it(t,e,r){var i=new ct(3);return i[0]=t,i[1]=e,i[2]=r,i}function Tt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}(function(){var t=Ve();return function(e,r,i,n,o,s){var h,c;for(r||(r=3),i||(i=0),n?c=Math.min(n*r+i,e.length):c=e.length,h=i;h<c;h+=r)t[0]=e[h],t[1]=e[h+1],t[2]=e[h+2],o(t,t,s),e[h]=t[0],e[h+1]=t[1],e[h+2]=t[2];return e}})();for(var X=256,$t=[],Xt=256,vt;X--;)$t[X]=(X+256).toString(16).substring(1);function He(t){var e=0,r=t||11;if(!vt||X+r>Xt*2)for(vt="",X=0;e<Xt;e++)vt+=$t[Math.random()*256|0];return vt.substring(X,X+++r)}var At={},je=function(){function t(e,r,i,n){this.x=e,this.y=r,this.w=i,this.h=n}return t.prototype.fitsIn=function(e){return e.w>=this.w&&e.h>=this.h},t.prototype.sameSizeAs=function(e){return this.w===e.w&&this.h===e.h},t}();Object.defineProperty(At,"__esModule",{value:!0}),At.default=je;var xt={},Bt=At;function zt(t){var e=t.width/2,r=document.createElement("canvas");r.id=t.id||"",r.width=t.width+t.width,r.height=t.height+t.height;var i=r.getContext("2d"),n=i.createPattern(t,"repeat");return i.fillStyle=n,i.translate(e,e),i.fillRect(-e,-e,r.width+e,r.height+e),i.translate(-e,-e),r}function Gt(t,e,r,i){var n=e?t.rect.w/4:0;return[[t.rect.x+n,t.rect.y+n],[t.rect.x+n+(t.rect.w-n*2),t.rect.y+n],[t.rect.x+n+(t.rect.w-n*2),t.rect.y+n+(t.rect.h-n*2)],[t.rect.x+n,t.rect.y+n+(t.rect.h-n*2)]].map(function(o){return o[0]!==0&&(o[0]=o[0]/r),o[1]!==0&&(o[1]=o[1]/i),o})}function qt(t,e,r,i){var n=e?t.rect.w/4:0,o=new Float32Array(8);return o[0]=(t.rect.x+n)/r,o[1]=(t.rect.y+n)/i,o[2]=(t.rect.x+n+(t.rect.w-n*2))/r,o[3]=(t.rect.y+n)/i,o[4]=(t.rect.x+n+(t.rect.w-n*2))/r,o[5]=(t.rect.y+n+(t.rect.h-n*2))/i,o[6]=(t.rect.x+n)/r,o[7]=(t.rect.y+n+(t.rect.h-n*2))/i,o}var lt=function(){function t(e,r,i,n){this.left=this.right=null,this.rect=new Bt.default(e,r,i,n),this.filled=!1}return t.prototype.pack=function(e){return this.left!==null?this.left.pack(e)||this.right.pack(e):this.filled||!e.fitsIn(this.rect)?null:e.sameSizeAs(this.rect)?(this.filled=!0,this):(this.rect.w-e.w>this.rect.h-e.h?(this.left=new t(this.rect.x,this.rect.y,e.w,this.rect.h),this.right=new t(this.rect.x+e.w,this.rect.y,this.rect.w-e.w,this.rect.h)):(this.left=new t(this.rect.x,this.rect.y,this.rect.w,e.h),this.right=new t(this.rect.x,this.rect.y+e.h,this.rect.w,this.rect.h-e.h)),this.left.pack(e))},t}();xt.AtlasNode=lt;var $e=function(){function t(e,r){r===void 0&&(r={}),this.tilepad=r.tilepad||!1,this.canvas=e,this.context=e.getContext("2d"),this._rootNode=new lt(0,0,this.canvas.width,this.canvas.height),this._terminalNodes={},this.invalidateUvIndices()}return t.prototype.pack=function(e,r){return this._checkId(e),this._pack(e,this.tilepad?zt(r):r)},t.prototype.expand=function(e,r){return this._checkId(e),this.invalidateUvIndices(),this._expand(e,this.tilepad?zt(r):r)},t.prototype.index=function(){var e=this;return Object.keys(this._terminalNodes).map(function(r){return e._terminalNodes[r].rect})},t.prototype.uv=function(){return this._uvs?this._uvs:(this._uvs=this.buildUvIndex(),this._uvs)},t.prototype.uv2=function(){return this._uvs2?this._uvs2:(this._uvs2=this.buildUvIndex2(),this._uvs2)},t.prototype.invalidateUvIndices=function(){this._uvs=null,this._uvs2=null},t.prototype._checkId=function(e){if(this._terminalNodes[e])throw new Error("Duplicated texture id "+e)},t.prototype._pack=function(e,r){var i=new Bt.default(0,0,r.width,r.height),n=this._rootNode.pack(i);return n?(this._ontoCanvas(e,r,n.rect),this._terminalNodes[e]=n,this._uvs&&(this._uvs[e]=Gt(n,this.tilepad,this.canvas.width,this.canvas.height)),this._uvs2&&(this._uvs2[e]=qt(n,this.tilepad,this.canvas.width,this.canvas.height)),n):null},t.prototype._expand=function(e,r){var i=new Bt.default(0,0,r.width,r.height),n=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),o;this._rootNode.rect.w<this._rootNode.rect.h?(this.canvas.width=this._rootNode.rect.w+i.w,o=new lt(this._rootNode.rect.w,0,i.w,this._rootNode.rect.h)):(this.canvas.height=this._rootNode.rect.h+i.h,o=new lt(0,this._rootNode.rect.h,this._rootNode.rect.w,i.h)),this.context.putImageData(n,0,0);var s=this._rootNode;return this._rootNode=new lt(0,0,this.canvas.width,this.canvas.height),this._rootNode.left=s,this._rootNode.right=o,this._pack(e,r)?this:this._expand(e,r)},t.prototype.buildUvIndex=function(){var e=this,r={};return Object.keys(this._terminalNodes).map(function(i){var n=e._terminalNodes[i];r[i]=Gt(n,e.tilepad,e.canvas.width,e.canvas.height)}),r},t.prototype.buildUvIndex2=function(){var e=this,r={};return Object.keys(this._terminalNodes).map(function(i){var n=e._terminalNodes[i];r[i]=qt(n,e.tilepad,e.canvas.width,e.canvas.height)}),r},t.prototype._ontoCanvas=function(e,r,i){this.context.clearRect(i.x,i.y,i.w,i.h),this.context.drawImage(r,i.x,i.y,i.w,i.h)},t}();Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=$e;var Xe=At;Xe.default;var ze=xt,Ge=ze.default,qe=Object.defineProperty,Ke=(t,e,r)=>e in t?qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z=(t,e,r)=>(Ke(t,typeof e!="symbol"?e+"":e,r),r),Kt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},B=(t,e,r)=>(Kt(t,e,"read from private field"),r?r.call(t):e.get(t)),yt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Je=(t,e,r,i)=>(Kt(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),It="-- DEFINES_HOOK --",Qe=(t,e,r,i={})=>{if(Object.keys(i).length&&!r.includes(It))throw new Error(`in order to include defines, you must provide "${It}" in your shader code`);let n="";for(const[h,c]of Object.entries(i)){if(typeof c=="boolean"&&!c)continue;let d=`${c}`;typeof c=="number"&&Number.isInteger(c)&&(d+=".0"),n+=`#define ${h} ${d}
`}r=r.replace(It,n);const o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;const s=`
    Error in ${e===t.VERTEX_SHADER?"Vertex":"Fragment"} shader:
    ${t.getShaderInfoLog(o)}
  `;throw t.deleteShader(o),new Error(s)},Jt=Qe,Ze=(t,e,r,i)=>{const n=Jt(t,t.VERTEX_SHADER,e,i),o=Jt(t,t.FRAGMENT_SHADER,r,i),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),t.linkProgram(s),t.detachShader(s,n),t.deleteShader(n),t.detachShader(s,o),t.deleteShader(o),t.getProgramParameter(s,t.LINK_STATUS))return s;const h=new Error(`Error linking program: ${t.getProgramInfoLog(s)}`);throw t.deleteProgram(s),h},Ut=Ze,tr=(t,e,r,i)=>{let n;switch(e){case t.FLOAT:return t.uniform1f(r,i);case t.FLOAT_VEC2:return n=i,t.uniform2f(r,n[0],n[1]);case t.FLOAT_VEC3:return n=i,t.uniform3f(r,n[0],n[1],n[2]);case t.FLOAT_VEC4:return n=i,t.uniform4f(r,n[0],n[1],n[2],n[3]);case t.BOOL:case t.INT:case t.SAMPLER_2D:case t.SAMPLER_CUBE:return t.uniform1i(r,i);case t.BOOL_VEC2:case t.INT_VEC2:return n=i,t.uniform2i(r,n[0],n[1]);case t.BOOL_VEC3:case t.INT_VEC3:return n=i,t.uniform3i(r,n[0],n[1],n[2]);case t.BOOL_VEC4:case t.INT_VEC4:return n=i,t.uniform4i(r,n[0],n[1],n[2],n[3]);case t.FLOAT_MAT2:return t.uniformMatrix2fv(r,!1,i);case t.FLOAT_MAT3:return t.uniformMatrix3fv(r,!1,i);case t.FLOAT_MAT4:return t.uniformMatrix4fv(r,!1,i);default:throw new Error("wrong type for uniform")}},Qt=tr,er=(t={})=>{const{width:e=1,height:r=1,widthSegments:i=1,heightSegments:n=1,flipUVy:o=!1}=t,s=i,h=n,c=(s+1)*(h+1),d=s*h*6,f=new Float32Array(c*3+c*2),l=c>65536?new Uint32Array(d):new Uint16Array(d);let u=0,m=0;const g=u,x=e/s,v=r/h,y=1,w=-1,E=0,A=5;for(let p=0;p<=h;p++){const _=p*v-r/2;for(let T=0;T<=s;T++,u++){const O=T*x-e/2;if(f[u*A+0]=O*y,f[u*A+1]=_*w,f[u*A+2]=E/2,f[u*A+3]=T/s,f[u*A+4]=o?1-p/h:p/h,p===h||T===s)continue;const et=g+T+p*(s+1),V=g+T+(p+1)*(s+1),rt=g+T+(p+1)*(s+1)+1,H=g+T+p*(s+1)+1;l[m*6]=et,l[m*6+1]=V,l[m*6+2]=H,l[m*6+3]=V,l[m*6+4]=rt,l[m*6+5]=H,m++}}return{width:e,height:r,vertexCount:l.length,vertexStride:A,interleavedArray:f,indicesArray:l}},rr=er,ir=(t={})=>{const{width:e=1,height:r=1}=t,i=4,n=3,o=new Float32Array(i*n);return o[0]=-e*.5,o[1]=-r*.5,o[2]=0,o[3]=e*.5,o[4]=-r*.5,o[5]=0,o[6]=e*.5,o[7]=r*.5,o[8]=0,o[9]=-e*.5,o[10]=r*.5,o[11]=0,{width:e,height:r,interleavedArray:o,vertexCount:i,vertexStride:n}},nr=ir,ar=(t={})=>{const{radius:e=1,segments:r=32,thetaStart:i=0,thetaEnd:n=Math.PI*2.1}=t,o=5,s=new Float32Array(r*3*o),h=[],c=[],d=[];h.push(0,0,0),c.push(.5,.5);for(let l=0,u=3;l<=r;l++,u+=3){const m=i+l/r*n;h.push(e*Math.cos(m),e*Math.sin(m),0),c.push((h[u]/e+1)/2,(h[u+1]/e+1)/2)}for(let l=0;l<=r;l++)s[l*o+0]=h[l*3+0],s[l*o+1]=h[l*3+1],s[l*o+2]=h[l*3+2],s[l*o+3]=c[l*2+0],s[l*o+4]=c[l*2+1];for(let l=1;l<=r;l++)d.push(l,l+1,0);const f=r>65536?new Uint32Array(d):new Uint16Array(d);return console.log(r,f.length),{radius:e,vertexCount:f.length,vertexStride:o,interleavedArray:s,indicesArray:f}},sr=ar,or=(t={})=>{const{radius:e=1,segments:r=32,thetaStart:i=0,thetaEnd:n=Math.PI*2}=t,o=3,s=new Float32Array(r*o),h=n/r;for(let c=0;c<r;c++){const d=Math.cos(i+c*h)*e,f=Math.sin(i+c*h)*e;s[c*3+0]=d,s[c*3+1]=f,s[c*3+2]=0}return{radius:e,interleavedArray:s,vertexCount:r,vertexStride:o}},hr=or,cr=(t,e,r,i,n,o)=>{const s=new Float32Array(15),h=new Uint16Array([0,1,2]);return s[0]=t,s[1]=e,s[2]=0,s[3]=1,s[4]=1,s[5]=r,s[6]=i,s[7]=0,s[8]=0,s[9]=1,s[10]=n,s[11]=o,s[12]=0,s[13]=0,s[14]=0,{vertexCount:3,indicesArray:h,interleavedArray:s,vertexStride:5}},lr=cr,dr=class{constructor(){R(this,"upVector",it(0,1,0));R(this,"position",it(0,0,0));R(this,"lookAt",it(0,0,0));R(this,"projectionMatrix",$());R(this,"viewMatrix",$());R(this,"viewMatrixInverse",$());R(this,"projectionViewMatrix",$())}updateProjectionMatrix(){}updateViewMatrix(){return We(this.viewMatrix,this.position,this.lookAt,this.upVector),Ht(this.viewMatrixInverse,this.viewMatrix),this}updateProjectionViewMatrix(){return this.updateProjectionMatrix(),this.updateViewMatrix(),jt(this.projectionViewMatrix,this.projectionMatrix,this.viewMatrix),this}},ur=class extends dr{constructor(e,r,i,n,o,s){super();R(this,"left");R(this,"right");R(this,"bottom");R(this,"top");R(this,"near");R(this,"far");this.left=e,this.right=r,this.top=i,this.bottom=n,this.near=o,this.far=s,this.updateProjectionMatrix()}updateProjectionMatrix(){return ke(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far),this}},fr=class{constructor(){R(this,"position",it(0,0,0));R(this,"rotation",it(0,0,0));R(this,"scale",it(1,1,1));R(this,"modelMatrix",$());R(this,"shouldUpdate",!0)}copyFromMatrix(t){return Wt(this.modelMatrix,t),this.shouldUpdate=!1,this}setPosition(t){return Tt(this.position,t),this.shouldUpdate=!0,this}setScale(t){return Tt(this.scale,t),this.shouldUpdate=!0,this}setRotation(t){return Tt(this.rotation,t),this.shouldUpdate=!0,this}updateModelMatrix(){return Vt(this.modelMatrix),Pe(this.modelMatrix,this.modelMatrix,this.position),De(this.modelMatrix,this.modelMatrix,this.rotation[0]),Ce(this.modelMatrix,this.modelMatrix,this.rotation[1]),Oe(this.modelMatrix,this.modelMatrix,this.rotation[2]),Se(this.modelMatrix,this.modelMatrix,this.scale),this.shouldUpdate=!1,this}},mr=class extends fr{constructor(e=void 0){super();R(this,"parentNode",null);R(this,"_children",[]);R(this,"_visible",!0);R(this,"worldMatrix",$());R(this,"normalMatrix",$());R(this,"uid",He(9));R(this,"name");this.name=e}get visible(){return this._visible}set visible(e){this._visible=e}get children(){return this._children}get siblings(){return this.parentNode?this.parentNode._children:[]}get levelIndex(){let e=0,r=this.parentNode;for(;r;)e++,r=r.parentNode;return e}setParent(e=null){if(this.parentNode){const r=this.parentNode._children.indexOf(this);r>=0&&this.parentNode._children.splice(r,1)}return e&&e.addChild(this),this.parentNode=e,this}addChild(e){return this._children.push(e),this}updateWorldMatrix(e=null){this.shouldUpdate&&this.updateModelMatrix(),e?jt(this.worldMatrix,e,this.modelMatrix):Wt(this.worldMatrix,this.modelMatrix),Ht(this.normalMatrix,this.worldMatrix),Ne(this.normalMatrix,this.normalMatrix);for(let r=0;r<this._children.length;r++)this._children[r].updateWorldMatrix(this.worldMatrix);return this}traverse(e,r=0){e(this,r),r++;for(let i=0;i<this._children.length;i++)this._children[i].traverse(e,r)}findChild(e){if(e(this))return this;let r=null;for(let i=0;i<this._children.length&&!(r=this._children[i].findChild(e));i++);return r}findChildByName(e){if(this.name===e)return this;let r=null;for(let i=0;i<this._children.length&&!(r=this._children[i].findChildByName(e));i++);return r}findParent(e){if(e(this))return this;let r=null,i=this.parentNode;for(;i&&!(r=i.findParent(e));)i=i==null?void 0:i.parentNode;return r}findParentByName(e){if(this.name===e)return this;let r=null,i=this.parentNode;for(;i&&!(r=i.findParentByName(e));)i=i==null?void 0:i.parentNode;return r}render(){if(this._visible)for(let e=0;e<this._children.length;e++)this._children[e].render()}},nt,Et=class extends mr{constructor(t,e,r,i={},n){if(super(n),z(this,"gl"),z(this,"vao"),z(this,"vertexCount"),yt(this,nt,new Map),z(this,"boundingBox"),z(this,"program"),this.gl=t,this.vao=t.createVertexArray(),this.program=Ut(t,e,r,i),this.program.__SPECTOR_Metadata={name:n,shaderDefines:i},!this.setUniform(Et.WORLD_MATRIX_UNIFORM_NAME,{type:t.FLOAT_MAT4}))throw new Error(`Each Drawable is expected to have a mat4 ${Et.WORLD_MATRIX_UNIFORM_NAME} implemented in shader`)}setUniform(t,{type:e,value:r}){const i=this.gl;let n;if(n=B(this,nt).get(t))n.value=r;else{const o=i.getUniformLocation(this.program,t);if(!o)return console.error(`uniform with name ${t} was not found in the program`),!1;n={type:e,location:o,value:r},B(this,nt).set(t,n)}return r!=null&&(i.useProgram(this.program),Qt(i,n.type,n.location,r)),!0}updateUniform(t,e){let r;if(r=this.getUniform(t)){r.value=e;const i=this.gl;return i.useProgram(this.program),Qt(i,r.type,r.location,e),!0}return!1}getUniform(t){let e;return(e=B(this,nt).get(t))?e:(console.error("can't locate uniform with that name"),null)}updateWorldMatrix(t){return super.updateWorldMatrix(t),this.updateUniform(Et.WORLD_MATRIX_UNIFORM_NAME,this.worldMatrix),this}destroy(){B(this,nt).clear();const t=this.gl;t.deleteVertexArray(this.vao),t.deleteProgram(this.program)}},pr=Et;nt=new WeakMap,z(pr,"WORLD_MATRIX_UNIFORM_NAME","u_worldMatrix");var gr=document.createElement("canvas"),Zt=gr.getContext("webgl2"),k=Zt.MAX_TEXTURE_SIZE,_t=Zt.RGB,Nt,b,Lt=!1,G,at,st,Pt=class{constructor(){if(yt(this,G,[]),yt(this,at,[]),yt(this,st,document.createElement("div")),Lt){const t=document.createElement("style"),e="hwoa-rang-texture-atlas-debug";t.setAttribute("type","text/css");const r=`
        #${e} {
          position: fixed;
          bottom: 1rem;
          right: 1rem;
          transform-origin: 100% 100%;
          width: 400px;
          max-height: 100vh;
          overflow: scroll;
        }
        #${e} canvas {
          max-width: 100%;
        }
      `;t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t),Je(this,st,document.createElement("div")),B(this,st).setAttribute("id",e),document.body.appendChild(B(this,st))}}static set debugMode(t){Lt=t}static get textureSize(){return k}static set textureSize(t){k=t}static set textureFormat(t){_t=t}static set gl(t){b=t}static getInstance(){if(!b)throw new Error("You must provide a WebGL2RenderingContext first via setting the TextureAtlas.gl property!");return Nt||(Nt=new Pt),Nt}pack(t,e,r=1){const i=()=>{const u=document.createElement("canvas");B(this,st).appendChild(u),u.width=k,u.height=k;const m=b.createTexture();b.bindTexture(b.TEXTURE_2D,m),b.texParameterf(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR),b.texImage2D(b.TEXTURE_2D,0,_t,k,k,0,_t,b.UNSIGNED_BYTE,null),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null);const g=new Ge(u);return B(this,G).push(g),B(this,at).push(m),g};let n=B(this,G)[B(this,G).length-1];n||(n=i());const o=r===1?e:Pt.scaleDownDrawableByFactor(e,r);n.pack(t,o)||(n=i(),n.pack(t,o));const s=n.uv()[t];for(let u=0;u<s.length;u++)s[u][0]*=k,s[u][1]*=k;const h=B(this,at)[B(this,at).length-1],c=s[0][0],d=s[0][1],f=s[2][0]-s[0][0],l=s[2][1]-s[0][1];return b.bindTexture(b.TEXTURE_2D,h),b.texSubImage2D(b.TEXTURE_2D,0,c,d,f,l,_t,b.UNSIGNED_BYTE,o),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null),this}getUv2(t){let e=-1;for(let r=0;r<B(this,G).length;r++){const i=B(this,G)[r].uv2()[t];if(i){e=r;const n=B(this,at)[e];return[i,n]}}throw new Error("Can't get uvs")}},vr=Pt;G=new WeakMap,at=new WeakMap,st=new WeakMap,z(vr,"scaleDownDrawableByFactor",(t,e)=>{const r=document.createElement("canvas"),i=t instanceof HTMLImageElement?t.naturalWidth:t.width,n=t instanceof HTMLImageElement?t.naturalHeight:t.height;r.width=i/e,r.height=n/e,Lt&&console.log(`Scaled ${i}x${n} project image to ${r.width}x${r.height}`);const o=r.getContext("2d");return o.imageSmoothingQuality="high",o.drawImage(t,0,0,i,n,0,0,r.width,r.height),r});var te=`#version 300 es

-- DEFINES_HOOK --

uniform mat4 uProjectionViewMatrix;

in vec4 aInstanceTransform;
in vec4 aPosition;
in vec4 aColor;
in vec2 aUV;

out vec2 vUV;
out vec4 vColor;

vec2 rotate(vec2 v, float a) {
	float s = sin(a);
	float c = cos(a);
	mat2 m = mat2(c, s, -s, c);
	return m * v;
}

void main () {
  vec4 pos = aPosition;

  #ifdef IS_LINES
    if (aPosition.x == 0.0f) {
      pos.xy = aInstanceTransform.xy;
    } else {
      pos.xy = aInstanceTransform.zw;
    }
  #else
    vec2 offset = aInstanceTransform.xy;
    float angle = aInstanceTransform.z;
    float scale = aInstanceTransform.w;

    pos.xy *= scale;
    pos.xy = rotate(pos.xy, angle);
    pos.xy += offset;
  #endif
  
  gl_Position = uProjectionViewMatrix * pos;

  vUV = aUV;
  vColor = aColor;
}`,ee=`#version 300 es
precision highp float;

-- DEFINES_HOOK --

in vec2 vUV;
in vec4 vColor;

out vec4 finalColor;

void main () {
  #ifdef LINES
    finalColor = vec4(vec3(0.8), 1.0);
  #else
    finalColor = vColor;
  #endif
}`;const Ar=await Me(()=>import("./Phy2D-qt3G4Qy0.js"),__vite__mapDeps([])),{Vec2:ot,Body:q,World:xr,vector$Vec2$:yr}=await Ar.default(),Er=0,re=1,ie=2,ne=new ot(-1e3,-1e3);let ae=0;const K=document.getElementById("c");Pr();const a=K.getContext("webgl2"),St=new Ue(a),wt=new ur(0,innerWidth,0,innerHeight,.1,10);wt.position[2]=1,wt.updateProjectionViewMatrix();const N=Ut(a,te,ee,{}),Rt=Ut(a,te,ee,{LINES:!0}),J=a.getAttribLocation(N,"aInstanceTransform"),dt=a.getAttribLocation(N,"aPosition"),Dt=a.getAttribLocation(N,"aUV"),Q=a.getAttribLocation(N,"aColor");let Ct=a.getUniformLocation(N,"uProjectionViewMatrix");a.useProgram(N),a.uniformMatrix4fv(Ct,!1,wt.projectionViewMatrix),Ct=a.getUniformLocation(Rt,"uProjectionViewMatrix"),a.useProgram(Rt),a.uniformMatrix4fv(Ct,!1,wt.projectionViewMatrix);const Ot=[],F=document.createElement("canvas");F.width=innerWidth,F.height=innerHeight,F.style.setProperty("position","fixed"),F.style.setProperty("bottom","0px"),F.style.setProperty("left","0px"),F.style.setProperty("z-index","999"),F.style.setProperty("border","1px solid blue"),F.classList.add("fadeable"),document.body.appendChild(F);const I=F.getContext("2d"),se=1;I.font=`bold ${se}px Helvetica`;const oe="2024",_r=se*(F.width*.77/I.measureText(oe).width);I.font=`bold ${_r}px Helvetica`,I.textAlign="center",I.textBaseline="middle",I.fillStyle="white",I.save(),I.translate(F.width*.5,F.height*.5),I.scale(1,1),I.fillStyle="black",I.fillText(oe,0,0),I.restore();const wr=new Uint32Array(I.getImageData(0,0,F.width,F.height).data.buffer),Rr=10,br=10;I.globalAlpha=.2;for(let t=0;t<F.width;t+=Rr)for(let e=0;e<F.height;e+=br)wr[e*F.width+t]&&Ot.push({x:t,y:e});setTimeout(()=>{F.classList.add("faded"),F.addEventListener("transitionend",()=>{F.parentNode.removeChild(F)})},250);const L=[],P=[],W=[],Z=new xr(-5,innerWidth,innerHeight);Z.gravity=-10;const he=new q(innerWidth,1,innerWidth*.5,innerHeight,0);he.restitution=1;const Fr=new q(1,innerHeight*2,0,innerHeight*.5,0),Mr=new q(1,innerHeight*2,innerWidth-1,innerHeight*.5,0);Z.AddBody(he),Z.AddBody(Fr),Z.AddBody(Mr);const ht=new q(60,-1e3,-100,0);ht.restitution=.3,Z.AddBody(ht);let tt=0;const bt=innerHeight;for(;tt<bt;){let t=0,e=0;const r=Math.cos(tt/bt*Math.PI*2);for(;e<innerWidth;){const i=innerWidth>innerHeight?21:15,n=innerWidth>innerHeight?36:28;let o=(r*i+n)*.5,s=o+Math.random()*o;const h=s*.5+e,c=tt;let d,f=Math.random()<.9?re:ie;tt>bt*.3&&tt<bt*.7&&(f=Math.floor(Math.random()*2));const l=tt-innerHeight*1.5;if(f===re)d=new q(s*1.015,h,l,1),d.scale=s,P.push(d);else if(f===Er)d=new q(s*2*1.015,s*2*1.015,h,l,2),d.scale=s*2,L.push(d);else if(f===ie){const u=new yr;u.push_back(new ot(-.5*s*2,.5*s*2)),u.push_back(new ot(0*s*2,-.5*s*2)),u.push_back(new ot(.5*s*2,.5*s*2)),d=new q(u,h,l,10,0,0),d.scale=s*2,W.push(d)}s>t&&(t=s),d.restitution=.1,d.color=1,Z.AddBody(d);for(let u=0;u<Ot.length;u++){const{x:m,y:g}=Ot[u],x=m-h,v=g-c*1;Math.sqrt(x*x+v*v)<10&&(d.color=0)}e+=s*2}tt+=t*1.4}const S=new Float32Array(L.length*4),Ft=new Float32Array(L.length*3),D=new Float32Array(P.length*4),ut=new Float32Array(P.length*3),C=new Float32Array(W.length*4),ft=new Float32Array(W.length*3);for(let t=0;t<L.length;t++){const e=L[t];S[t*4+0]=e.position.x,S[t*4+1]=e.position.y,S[t*4+2]=0,S[t*4+3]=e.scale,Ft[t*3+0]=0,Ft[t*3+1]=e.color,Ft[t*3+2]=0}for(let t=0;t<P.length;t++){const e=P[t];D[t*4+0]=e.position.x,D[t*4+1]=e.position.y,D[t*4+2]=0,D[t*4+3]=e.scale,ut[t*3+0]=0,ut[t*3+1]=e.color,ut[t*3+2]=0}for(let t=0;t<W.length;t++){const e=W[t];C[t*4+0]=e.position.x,C[t*4+1]=e.position.y,C[t*4+2]=0,C[t*4+3]=e.scale,ft[t*3+0]=0,ft[t*3+1]=e.color,ft[t*3+2]=0}const mt=rr(),ce=nr(),le=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,le),a.bufferData(a.ARRAY_BUFFER,S,a.DYNAMIC_DRAW);const de=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,de),a.bufferData(a.ARRAY_BUFFER,Ft,a.STATIC_DRAW);const ue=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ue),a.bufferData(a.ARRAY_BUFFER,mt.interleavedArray,a.STATIC_DRAW);const fe=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,fe),a.bufferData(a.ARRAY_BUFFER,ce.interleavedArray,a.STATIC_DRAW);const me=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,me),a.bufferData(a.ELEMENT_ARRAY_BUFFER,mt.indicesArray,a.STATIC_DRAW);const pt=sr(),pe=hr(),ge=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ge),a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW);const ve=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ve),a.bufferData(a.ARRAY_BUFFER,ut,a.STATIC_DRAW);const Ae=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Ae),a.bufferData(a.ARRAY_BUFFER,pt.interleavedArray,a.STATIC_DRAW);const xe=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,xe),a.bufferData(a.ARRAY_BUFFER,pe.interleavedArray,a.STATIC_DRAW);const ye=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,ye),a.bufferData(a.ELEMENT_ARRAY_BUFFER,pt.indicesArray,a.STATIC_DRAW);const Ee=lr(-.5,.5,0,-.5,.5,.5),_e=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,_e),a.bufferData(a.ARRAY_BUFFER,C,a.DYNAMIC_DRAW);const we=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,we),a.bufferData(a.ARRAY_BUFFER,ft,a.STATIC_DRAW);const Re=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Re),a.bufferData(a.ARRAY_BUFFER,Ee.interleavedArray,a.STATIC_DRAW);const Yt=matchMedia("(orientation: portrait)"),Tr=Yt.matches;Yt.addEventListener("change",()=>{Tr&&!Yt.matches&&location.reload()}),requestAnimationFrame(Fe),document.body.addEventListener("mousedown",Br),document.body.addEventListener("mouseup",Ir),document.body.addEventListener("touchmove",Ur),document.body.addEventListener("touchend",Nr);function Br(){document.body.addEventListener("mousemove",be)}function be(t){let e=t.pageX,r=t.pageY;e>innerWidth*.95&&(e=innerWidth*.95),e<innerWidth*.05&&(e=innerWidth*.05),r>innerHeight*.85&&(r=innerHeight*.85),r<innerHeight*.15&&(r=innerHeight*.15),ht.position=new ot(e,r)}function Ir(){document.body.removeEventListener("mousemove",be),ht.position=ne}function Ur(t){ht.position=new ot(t.pageX,t.pageY),t.preventDefault()}function Nr(){ht.position=ne}function Fe(t){const e=Math.min((t-ae)*.001,.01667);ae=t,St.begin("Simulation"),Z.Update(e);for(let r=0;r<P.length;r++){const i=P[r];D[r*4+0]=i.position.x,D[r*4+1]=i.position.y,D[r*4+2]=i.rotation}for(let r=0;r<L.length;r++){const i=L[r];S[r*4+0]=i.position.x,S[r*4+1]=i.position.y,S[r*4+2]=i.rotation}for(let r=0;r<W.length;r++){const i=W[r];C[r*4+0]=i.position.x,C[r*4+1]=i.position.y,C[r*4+2]=i.rotation}a.viewport(0,0,K.width,K.height),a.clearColor(.6,.6,.6,1),a.clear(a.COLOR_BUFFER_BIT),a.enableVertexAttribArray(J),a.enableVertexAttribArray(Q),a.enableVertexAttribArray(dt),a.enableVertexAttribArray(Dt),Lr(),St.end("Simulation"),St.nextFrame(t),requestAnimationFrame(Fe)}function Lr(){a.useProgram(N),a.bindBuffer(a.ARRAY_BUFFER,le),a.bufferData(a.ARRAY_BUFFER,S,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,de),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,ue),a.vertexAttribPointer(dt,3,a.FLOAT,!1,mt.vertexStride*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(Dt,2,a.FLOAT,!1,mt.vertexStride*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,me),a.drawElementsInstanced(a.TRIANGLES,mt.vertexCount,a.UNSIGNED_SHORT,0,L.length),a.useProgram(Rt),a.bindBuffer(a.ARRAY_BUFFER,fe),a.vertexAttribPointer(dt,3,a.FLOAT,!1,0,0),a.drawArraysInstanced(a.LINE_LOOP,0,ce.vertexCount,L.length),a.useProgram(N),a.bindBuffer(a.ARRAY_BUFFER,ge),a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,ve),a.bufferData(a.ARRAY_BUFFER,ut,a.STATIC_DRAW),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,Ae),a.vertexAttribPointer(dt,3,a.FLOAT,!1,pt.vertexStride*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(Dt,2,a.FLOAT,!1,pt.vertexStride*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,ye),a.drawElementsInstanced(a.TRIANGLES,pt.vertexCount,a.UNSIGNED_SHORT,0,P.length),a.useProgram(Rt),a.bindBuffer(a.ARRAY_BUFFER,xe),a.drawArraysInstanced(a.LINE_LOOP,1,pe.vertexCount,P.length),a.useProgram(N),a.bindBuffer(a.ARRAY_BUFFER,_e),a.bufferData(a.ARRAY_BUFFER,C,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,we),a.bufferData(a.ARRAY_BUFFER,ft,a.STATIC_DRAW),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,Re),a.vertexAttribPointer(dt,3,a.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),a.drawArraysInstanced(a.TRIANGLES,0,Ee.vertexCount,W.length)}function Pr(){K.width=innerWidth*devicePixelRatio,K.height=innerHeight*devicePixelRatio,K.style.setProperty("width",`${innerWidth}px`),K.style.setProperty("height",`${innerHeight}px`)}})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
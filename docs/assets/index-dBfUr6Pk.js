var jr=Object.defineProperty;var $r=(j,U,k)=>U in j?jr(j,U,{enumerable:!0,configurable:!0,writable:!0,value:k}):j[U]=k;var R=(j,U,k)=>($r(j,typeof U!="symbol"?U+"":U,k),k);(async()=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const j="modulepreload",U=function(t,e){return new URL(t,e).href},k={},Le=function(t,e,r){let i=Promise.resolve();if(e&&e.length>0){const n=document.getElementsByTagName("link");i=Promise.all(e.map(o=>{if(o=U(o,r),o in k)return;k[o]=!0;const s=o.endsWith(".css"),h=s?'[rel="stylesheet"]':"";if(r)for(let u=n.length-1;u>=0;u--){const f=n[u];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${h}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":j,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})};var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ht={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(Ne,function(){var r=`<div class="gl-box">
  <svg viewBox="0 0 55 60">
    <text x="27" y="56" class="gl-fps">00 FPS</text>
    <text x="28" y="8" class="gl-mem"></text>
    <rect x="0" y="14" rx="4" ry="4" width="55" height="32"></rect>
    <polyline class="gl-chart"></polyline>
  </svg>
  <svg viewBox="0 0 14 60" class="gl-cpu-svg">
    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>
    <line x1="7" y1="38" x2="7" y2="11" class="gl-cpu" stroke-dasharray="0 27"/>
    <path d="M5.35 43c-.464 0-.812.377-.812.812v1.16c-.783.1972-1.421.812-1.595 1.624h-1.16c-.435 0-.812.348-.812.812s.348.812.812.812h1.102v1.653H1.812c-.464 0-.812.377-.812.812 0 .464.377.812.812.812h1.131c.1943.783.812 1.392 1.595 1.595v1.131c0 .464.377.812.812.812.464 0 .812-.377.812-.812V53.15h1.653v1.073c0 .464.377.812.812.812.464 0 .812-.377.812-.812v-1.131c.783-.1943 1.392-.812 1.595-1.595h1.131c.464 0 .812-.377.812-.812 0-.464-.377-.812-.812-.812h-1.073V48.22h1.102c.435 0 .812-.348.812-.812s-.348-.812-.812-.812h-1.16c-.1885-.783-.812-1.421-1.595-1.624v-1.131c0-.464-.377-.812-.812-.812-.464 0-.812.377-.812.812v1.073H6.162v-1.073c0-.464-.377-.812-.812-.812zm.58 3.48h2.088c.754 0 1.363.609 1.363 1.363v2.088c0 .754-.609 1.363-1.363 1.363H5.93c-.754 0-1.363-.609-1.363-1.363v-2.088c0-.754.609-1.363 1.363-1.363z"/>
  </svg>
  <svg viewBox="0 0 14 60" class="gl-gpu-svg">
    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>
    <line x1="7" y1="38" x2="7" y2="11" class="gl-gpu" stroke-dasharray="0 27"/>
    <path d="M1.94775 43.3772a.736.736 0 10-.00416 1.472c.58535.00231.56465.1288.6348.3197.07015.18975.04933.43585.04933.43585l-.00653.05405v8.671a.736.736 0 101.472 0v-1.4145c.253.09522.52785.1495.81765.1495h5.267c1.2535 0 2.254-.9752 2.254-2.185v-3.105c0-1.2075-1.00625-2.185-2.254-2.185h-5.267c-.28865 0-.5635.05405-.8165.1495.01806-.16445.04209-.598-.1357-1.0787-.22425-.6072-.9499-1.2765-2.0125-1.2765zm2.9095 3.6455c.42435 0 .7659.36225.7659.8119v2.9785c0 .44965-.34155.8119-.7659.8119s-.7659-.36225-.7659-.8119v-2.9785c0-.44965.34155-.8119.7659-.8119zm4.117 0a2.3 2.3 0 012.3 2.3 2.3 2.3 0 01-2.3 2.3 2.3 2.3 0 01-2.3-2.3 2.3 2.3 0 012.3-2.3z"/>
  </svg>
</div>`,i=`#gl-bench {
  position:absolute;
  left:0;
  top:0;
  z-index:1000;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

#gl-bench div {
  position: relative;
  display: block;
  margin: 4px;
  padding: 0 7px 0 10px;
  background: #6c6;
  border-radius: 15px;
  cursor: pointer;
  opacity: 0.9;
}

#gl-bench svg {
  height: 60px;
  margin: 0 -1px;
}

#gl-bench text {
  font-size: 12px;
  font-family: Helvetica,Arial,sans-serif;
  font-weight: 700;
  dominant-baseline: middle;
  text-anchor: middle;
}

#gl-bench .gl-mem {
  font-size: 9px;
}

#gl-bench line {
  stroke-width: 5;
  stroke: #112211;
  stroke-linecap: round;
}

#gl-bench polyline {
  fill: none;
  stroke: #112211;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-width: 3.5;
}

#gl-bench rect {
  fill: #448844;
}

#gl-bench .opacity {
  stroke: #448844;
}
`;class n{constructor(s,h={}){this.css=i,this.svg=r,this.paramLogger=()=>{},this.chartLogger=()=>{},this.chartLen=20,this.chartHz=20,this.names=[],this.cpuAccums=[],this.gpuAccums=[],this.activeAccums=[],this.chart=new Array(this.chartLen),this.now=()=>performance&&performance.now?performance.now():Date.now(),this.updateUI=()=>{[].forEach.call(this.nodes["gl-gpu-svg"],d=>{d.style.display=this.trackGPU?"inline":"none"})},Object.assign(this,h),this.detected=0,this.finished=[],this.isFramebuffer=0,this.frameId=0;let c,u=0,f,l=d=>{++u<20?c=requestAnimationFrame(l):(this.detected=Math.ceil(1e3*u/(d-f)/70),cancelAnimationFrame(c)),f||(f=d)};if(requestAnimationFrame(l),s){const d=async(p,A)=>Promise.resolve(setTimeout(()=>{s.getError();const v=this.now()-p;A.forEach((x,w)=>{x&&(this.gpuAccums[w]+=v)})},0)),m=(p,A,v)=>function(){const x=A.now();p.apply(v,arguments),A.trackGPU&&A.finished.push(d(x,A.activeAccums.slice(0)))};["drawArrays","drawElements","drawArraysInstanced","drawBuffers","drawElementsInstanced","drawRangeElements"].forEach(p=>{s[p]&&(s[p]=m(s[p],this,s))}),s.getExtension=((p,A)=>function(){let v=p.apply(s,arguments);return v&&["drawElementsInstancedANGLE","drawBuffersWEBGL"].forEach(x=>{v[x]&&(v[x]=m(v[x],A,v))}),v})(s.getExtension,this)}if(!this.withoutUI){this.dom||(this.dom=document.body);let d=document.createElement("div");d.id="gl-bench",this.dom.appendChild(d),this.dom.insertAdjacentHTML("afterbegin",'<style id="gl-bench-style">'+this.css+"</style>"),this.dom=d,this.dom.addEventListener("click",()=>{this.trackGPU=!this.trackGPU,this.updateUI()}),this.paramLogger=((m,p,A)=>{const v=["gl-cpu","gl-gpu","gl-mem","gl-fps","gl-gpu-svg","gl-chart"],x=Object.assign({},v);return v.forEach(w=>x[w]=p.getElementsByClassName(w)),this.nodes=x,(w,E,y,g,_,T,Y)=>{x["gl-cpu"][w].style.strokeDasharray=(E*.27).toFixed(0)+" 100",x["gl-gpu"][w].style.strokeDasharray=(y*.27).toFixed(0)+" 100",x["gl-mem"][w].innerHTML=A[w]?A[w]:g?"mem: "+g.toFixed(0)+"mb":"",x["gl-fps"][w].innerHTML=_.toFixed(0)+" FPS",m(A[w],E,y,g,_,T,Y)}})(this.paramLogger,this.dom,this.names),this.chartLogger=((m,p)=>{let A={"gl-chart":p.getElementsByClassName("gl-chart")};return(v,x,w)=>{let E="",y=x.length;for(let g=0;g<y;g++){let _=(w+g+1)%y;x[_]!=null&&(E=E+" "+(55*g/(y-1)).toFixed(1)+","+(45-x[_]*22/60/this.detected).toFixed(1))}A["gl-chart"][v].setAttribute("points",E),m(this.names[v],x,w)}})(this.chartLogger,this.dom)}}addUI(s){this.names.indexOf(s)==-1&&(this.names.push(s),this.dom&&(this.dom.insertAdjacentHTML("beforeend",this.svg),this.updateUI()),this.cpuAccums.push(0),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFrame(s){this.frameId++;const h=s||this.now();if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=h;else{let c=h-this.paramTime;if(c>=1e3){const u=this.frameId-this.paramFrame,f=u/c*1e3;for(let l=0;l<this.names.length;l++){const d=this.cpuAccums[l]/c*100,m=this.gpuAccums[l]/c*100,p=performance&&performance.memory?performance.memory.usedJSHeapSize/(1<<20):0;this.paramLogger(l,d,m,p,f,c,u),this.cpuAccums[l]=0,Promise.all(this.finished).then(()=>{this.gpuAccums[l]=0,this.finished=[]})}this.paramFrame=this.frameId,this.paramTime=h}}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=h,this.circularId=0;else{let c=h-this.chartTime,u=this.chartHz*c/1e3;for(;--u>0&&this.detected;){const f=(this.frameId-this.chartFrame)/c*1e3;this.chart[this.circularId%this.chartLen]=f;for(let l=0;l<this.names.length;l++)this.chartLogger(l,this.chart,this.circularId);this.circularId++,this.chartFrame=this.frameId,this.chartTime=h}}}begin(s){this.updateAccums(s)}end(s){this.updateAccums(s)}updateAccums(s){let h=this.names.indexOf(s);h==-1&&(h=this.names.length,this.addUI(s));const c=this.now(),u=c-this.t0;for(let f=0;f<h+1;f++)this.activeAccums[f]&&(this.cpuAccums[f]+=u);this.activeAccums[h]=!this.activeAccums[h],this.t0=c}}return n})})(Ht);var Se=Ht.exports;const De=Pe(Se);var It=1e-6,lt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function $(){var t=new lt(16);return lt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ce(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],o=e[6],s=e[7],h=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=n,t[13]=s,t[14]=h}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Xt(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],h=e[5],c=e[6],u=e[7],f=e[8],l=e[9],d=e[10],m=e[11],p=e[12],A=e[13],v=e[14],x=e[15],w=r*h-i*s,E=r*c-n*s,y=r*u-o*s,g=i*c-n*h,_=i*u-o*h,T=n*u-o*c,Y=f*A-l*p,et=f*v-d*p,V=f*x-m*p,rt=l*v-d*A,H=l*x-m*A,xt=d*x-m*v,M=w*xt-E*H+y*rt+g*V-_*et+T*Y;return M?(M=1/M,t[0]=(h*xt-c*H+u*rt)*M,t[1]=(n*H-i*xt-o*rt)*M,t[2]=(A*T-v*_+x*g)*M,t[3]=(d*_-l*T-m*g)*M,t[4]=(c*V-s*xt-u*et)*M,t[5]=(r*xt-n*V+o*et)*M,t[6]=(v*y-p*T-x*E)*M,t[7]=(f*T-d*y+m*E)*M,t[8]=(s*H-h*V+u*Y)*M,t[9]=(i*V-r*H-o*Y)*M,t[10]=(p*_-A*y+x*w)*M,t[11]=(l*y-f*_-m*w)*M,t[12]=(h*et-s*rt-c*Y)*M,t[13]=(r*rt-i*et+n*Y)*M,t[14]=(A*E-p*g-v*w)*M,t[15]=(f*g-l*E+d*w)*M,t):null}function Oe(t,e,r){var i=e[0],n=e[1],o=e[2],s=e[3],h=e[4],c=e[5],u=e[6],f=e[7],l=e[8],d=e[9],m=e[10],p=e[11],A=e[12],v=e[13],x=e[14],w=e[15],E=r[0],y=r[1],g=r[2],_=r[3];return t[0]=E*i+y*h+g*l+_*A,t[1]=E*n+y*c+g*d+_*v,t[2]=E*o+y*u+g*m+_*x,t[3]=E*s+y*f+g*p+_*w,E=r[4],y=r[5],g=r[6],_=r[7],t[4]=E*i+y*h+g*l+_*A,t[5]=E*n+y*c+g*d+_*v,t[6]=E*o+y*u+g*m+_*x,t[7]=E*s+y*f+g*p+_*w,E=r[8],y=r[9],g=r[10],_=r[11],t[8]=E*i+y*h+g*l+_*A,t[9]=E*n+y*c+g*d+_*v,t[10]=E*o+y*u+g*m+_*x,t[11]=E*s+y*f+g*p+_*w,E=r[12],y=r[13],g=r[14],_=r[15],t[12]=E*i+y*h+g*l+_*A,t[13]=E*n+y*c+g*d+_*v,t[14]=E*o+y*u+g*m+_*x,t[15]=E*s+y*f+g*p+_*w,t}function Ye(t,e,r){var i=r[0],n=r[1],o=r[2],s,h,c,u,f,l,d,m,p,A,v,x;return e===t?(t[12]=e[0]*i+e[4]*n+e[8]*o+e[12],t[13]=e[1]*i+e[5]*n+e[9]*o+e[13],t[14]=e[2]*i+e[6]*n+e[10]*o+e[14],t[15]=e[3]*i+e[7]*n+e[11]*o+e[15]):(s=e[0],h=e[1],c=e[2],u=e[3],f=e[4],l=e[5],d=e[6],m=e[7],p=e[8],A=e[9],v=e[10],x=e[11],t[0]=s,t[1]=h,t[2]=c,t[3]=u,t[4]=f,t[5]=l,t[6]=d,t[7]=m,t[8]=p,t[9]=A,t[10]=v,t[11]=x,t[12]=s*i+f*n+p*o+e[12],t[13]=h*i+l*n+A*o+e[13],t[14]=c*i+d*n+v*o+e[14],t[15]=u*i+m*n+x*o+e[15]),t}function ke(t,e,r){var i=r[0],n=r[1],o=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function We(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[4],s=e[5],h=e[6],c=e[7],u=e[8],f=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+u*i,t[5]=s*n+f*i,t[6]=h*n+l*i,t[7]=c*n+d*i,t[8]=u*n-o*i,t[9]=f*n-s*i,t[10]=l*n-h*i,t[11]=d*n-c*i,t}function Ve(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],s=e[1],h=e[2],c=e[3],u=e[8],f=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-u*i,t[1]=s*n-f*i,t[2]=h*n-l*i,t[3]=c*n-d*i,t[8]=o*i+u*n,t[9]=s*i+f*n,t[10]=h*i+l*n,t[11]=c*i+d*n,t}function He(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],s=e[1],h=e[2],c=e[3],u=e[4],f=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+u*i,t[1]=s*n+f*i,t[2]=h*n+l*i,t[3]=c*n+d*i,t[4]=u*n-o*i,t[5]=f*n-s*i,t[6]=l*n-h*i,t[7]=d*n-c*i,t}function je(t,e,r,i,n,o,s){var h=1/(e-r),c=1/(i-n),u=1/(o-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*h,t[13]=(n+i)*c,t[14]=(s+o)*u,t[15]=1,t}var $e=je;function Xe(t,e,r,i){var n,o,s,h,c,u,f,l,d,m,p=e[0],A=e[1],v=e[2],x=i[0],w=i[1],E=i[2],y=r[0],g=r[1],_=r[2];return Math.abs(p-y)<It&&Math.abs(A-g)<It&&Math.abs(v-_)<It?$t(t):(f=p-y,l=A-g,d=v-_,m=1/Math.hypot(f,l,d),f*=m,l*=m,d*=m,n=w*d-E*l,o=E*f-x*d,s=x*l-w*f,m=Math.hypot(n,o,s),m?(m=1/m,n*=m,o*=m,s*=m):(n=0,o=0,s=0),h=l*s-d*o,c=d*n-f*s,u=f*o-l*n,m=Math.hypot(h,c,u),m?(m=1/m,h*=m,c*=m,u*=m):(h=0,c=0,u=0),t[0]=n,t[1]=h,t[2]=f,t[3]=0,t[4]=o,t[5]=c,t[6]=l,t[7]=0,t[8]=s,t[9]=u,t[10]=d,t[11]=0,t[12]=-(n*p+o*A+s*v),t[13]=-(h*p+c*A+u*v),t[14]=-(f*p+l*A+d*v),t[15]=1,t)}var zt=Oe;function ze(){var t=new lt(3);return lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function it(t,e,r){var i=new lt(3);return i[0]=t,i[1]=e,i[2]=r,i}function Bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}(function(){var t=ze();return function(e,r,i,n,o,s){var h,c;for(r||(r=3),i||(i=0),n?c=Math.min(n*r+i,e.length):c=e.length,h=i;h<c;h+=r)t[0]=e[h],t[1]=e[h+1],t[2]=e[h+2],o(t,t,s),e[h]=t[0],e[h+1]=t[1],e[h+2]=t[2];return e}})();for(var X=256,Gt=[],qt=256,yt;X--;)Gt[X]=(X+256).toString(16).substring(1);function Ge(t){var e=0,r=t||11;if(!yt||X+r>qt*2)for(yt="",X=0;e<qt;e++)yt+=Gt[Math.random()*256|0];return yt.substring(X,X+++r)}var Et={},qe=function(){function t(e,r,i,n){this.x=e,this.y=r,this.w=i,this.h=n}return t.prototype.fitsIn=function(e){return e.w>=this.w&&e.h>=this.h},t.prototype.sameSizeAs=function(e){return this.w===e.w&&this.h===e.h},t}();Object.defineProperty(Et,"__esModule",{value:!0}),Et.default=qe;var _t={},Ut=Et;function Kt(t){var e=t.width/2,r=document.createElement("canvas");r.id=t.id||"",r.width=t.width+t.width,r.height=t.height+t.height;var i=r.getContext("2d"),n=i.createPattern(t,"repeat");return i.fillStyle=n,i.translate(e,e),i.fillRect(-e,-e,r.width+e,r.height+e),i.translate(-e,-e),r}function Jt(t,e,r,i){var n=e?t.rect.w/4:0;return[[t.rect.x+n,t.rect.y+n],[t.rect.x+n+(t.rect.w-n*2),t.rect.y+n],[t.rect.x+n+(t.rect.w-n*2),t.rect.y+n+(t.rect.h-n*2)],[t.rect.x+n,t.rect.y+n+(t.rect.h-n*2)]].map(function(o){return o[0]!==0&&(o[0]=o[0]/r),o[1]!==0&&(o[1]=o[1]/i),o})}function Qt(t,e,r,i){var n=e?t.rect.w/4:0,o=new Float32Array(8);return o[0]=(t.rect.x+n)/r,o[1]=(t.rect.y+n)/i,o[2]=(t.rect.x+n+(t.rect.w-n*2))/r,o[3]=(t.rect.y+n)/i,o[4]=(t.rect.x+n+(t.rect.w-n*2))/r,o[5]=(t.rect.y+n+(t.rect.h-n*2))/i,o[6]=(t.rect.x+n)/r,o[7]=(t.rect.y+n+(t.rect.h-n*2))/i,o}var dt=function(){function t(e,r,i,n){this.left=this.right=null,this.rect=new Ut.default(e,r,i,n),this.filled=!1}return t.prototype.pack=function(e){return this.left!==null?this.left.pack(e)||this.right.pack(e):this.filled||!e.fitsIn(this.rect)?null:e.sameSizeAs(this.rect)?(this.filled=!0,this):(this.rect.w-e.w>this.rect.h-e.h?(this.left=new t(this.rect.x,this.rect.y,e.w,this.rect.h),this.right=new t(this.rect.x+e.w,this.rect.y,this.rect.w-e.w,this.rect.h)):(this.left=new t(this.rect.x,this.rect.y,this.rect.w,e.h),this.right=new t(this.rect.x,this.rect.y+e.h,this.rect.w,this.rect.h-e.h)),this.left.pack(e))},t}();_t.AtlasNode=dt;var Ke=function(){function t(e,r){r===void 0&&(r={}),this.tilepad=r.tilepad||!1,this.canvas=e,this.context=e.getContext("2d"),this._rootNode=new dt(0,0,this.canvas.width,this.canvas.height),this._terminalNodes={},this.invalidateUvIndices()}return t.prototype.pack=function(e,r){return this._checkId(e),this._pack(e,this.tilepad?Kt(r):r)},t.prototype.expand=function(e,r){return this._checkId(e),this.invalidateUvIndices(),this._expand(e,this.tilepad?Kt(r):r)},t.prototype.index=function(){var e=this;return Object.keys(this._terminalNodes).map(function(r){return e._terminalNodes[r].rect})},t.prototype.uv=function(){return this._uvs?this._uvs:(this._uvs=this.buildUvIndex(),this._uvs)},t.prototype.uv2=function(){return this._uvs2?this._uvs2:(this._uvs2=this.buildUvIndex2(),this._uvs2)},t.prototype.invalidateUvIndices=function(){this._uvs=null,this._uvs2=null},t.prototype._checkId=function(e){if(this._terminalNodes[e])throw new Error("Duplicated texture id "+e)},t.prototype._pack=function(e,r){var i=new Ut.default(0,0,r.width,r.height),n=this._rootNode.pack(i);return n?(this._ontoCanvas(e,r,n.rect),this._terminalNodes[e]=n,this._uvs&&(this._uvs[e]=Jt(n,this.tilepad,this.canvas.width,this.canvas.height)),this._uvs2&&(this._uvs2[e]=Qt(n,this.tilepad,this.canvas.width,this.canvas.height)),n):null},t.prototype._expand=function(e,r){var i=new Ut.default(0,0,r.width,r.height),n=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),o;this._rootNode.rect.w<this._rootNode.rect.h?(this.canvas.width=this._rootNode.rect.w+i.w,o=new dt(this._rootNode.rect.w,0,i.w,this._rootNode.rect.h)):(this.canvas.height=this._rootNode.rect.h+i.h,o=new dt(0,this._rootNode.rect.h,this._rootNode.rect.w,i.h)),this.context.putImageData(n,0,0);var s=this._rootNode;return this._rootNode=new dt(0,0,this.canvas.width,this.canvas.height),this._rootNode.left=s,this._rootNode.right=o,this._pack(e,r)?this:this._expand(e,r)},t.prototype.buildUvIndex=function(){var e=this,r={};return Object.keys(this._terminalNodes).map(function(i){var n=e._terminalNodes[i];r[i]=Jt(n,e.tilepad,e.canvas.width,e.canvas.height)}),r},t.prototype.buildUvIndex2=function(){var e=this,r={};return Object.keys(this._terminalNodes).map(function(i){var n=e._terminalNodes[i];r[i]=Qt(n,e.tilepad,e.canvas.width,e.canvas.height)}),r},t.prototype._ontoCanvas=function(e,r,i){this.context.clearRect(i.x,i.y,i.w,i.h),this.context.drawImage(r,i.x,i.y,i.w,i.h)},t}();Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Ke;var Je=Et;Je.default;var Qe=_t,Ze=Qe.default,tr=Object.defineProperty,er=(t,e,r)=>e in t?tr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z=(t,e,r)=>(er(t,typeof e!="symbol"?e+"":e,r),r),Zt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},I=(t,e,r)=>(Zt(t,e,"read from private field"),r?r.call(t):e.get(t)),wt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},rr=(t,e,r,i)=>(Zt(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),Lt="-- DEFINES_HOOK --",ir=(t,e,r,i={})=>{if(Object.keys(i).length&&!r.includes(Lt))throw new Error(`in order to include defines, you must provide "${Lt}" in your shader code`);let n="";for(const[h,c]of Object.entries(i)){if(typeof c=="boolean"&&!c)continue;let u=`${c}`;typeof c=="number"&&Number.isInteger(c)&&(u+=".0"),n+=`#define ${h} ${u}
`}r=r.replace(Lt,n);const o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;const s=`
    Error in ${e===t.VERTEX_SHADER?"Vertex":"Fragment"} shader:
    ${t.getShaderInfoLog(o)}
  `;throw t.deleteShader(o),new Error(s)},te=ir,nr=(t,e,r,i)=>{const n=te(t,t.VERTEX_SHADER,e,i),o=te(t,t.FRAGMENT_SHADER,r,i),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),t.linkProgram(s),t.detachShader(s,n),t.deleteShader(n),t.detachShader(s,o),t.deleteShader(o),t.getProgramParameter(s,t.LINK_STATUS))return s;const h=new Error(`Error linking program: ${t.getProgramInfoLog(s)}`);throw t.deleteProgram(s),h},Nt=nr,ar=(t,e,r,i)=>{let n;switch(e){case t.FLOAT:return t.uniform1f(r,i);case t.FLOAT_VEC2:return n=i,t.uniform2f(r,n[0],n[1]);case t.FLOAT_VEC3:return n=i,t.uniform3f(r,n[0],n[1],n[2]);case t.FLOAT_VEC4:return n=i,t.uniform4f(r,n[0],n[1],n[2],n[3]);case t.BOOL:case t.INT:case t.SAMPLER_2D:case t.SAMPLER_CUBE:return t.uniform1i(r,i);case t.BOOL_VEC2:case t.INT_VEC2:return n=i,t.uniform2i(r,n[0],n[1]);case t.BOOL_VEC3:case t.INT_VEC3:return n=i,t.uniform3i(r,n[0],n[1],n[2]);case t.BOOL_VEC4:case t.INT_VEC4:return n=i,t.uniform4i(r,n[0],n[1],n[2],n[3]);case t.FLOAT_MAT2:return t.uniformMatrix2fv(r,!1,i);case t.FLOAT_MAT3:return t.uniformMatrix3fv(r,!1,i);case t.FLOAT_MAT4:return t.uniformMatrix4fv(r,!1,i);default:throw new Error("wrong type for uniform")}},ee=ar,sr=(t={})=>{const{width:e=1,height:r=1,widthSegments:i=1,heightSegments:n=1,flipUVy:o=!1}=t,s=i,h=n,c=(s+1)*(h+1),u=s*h*6,f=new Float32Array(c*3+c*2),l=c>65536?new Uint32Array(u):new Uint16Array(u);let d=0,m=0;const p=d,A=e/s,v=r/h,x=1,w=-1,E=0,y=5;for(let g=0;g<=h;g++){const _=g*v-r/2;for(let T=0;T<=s;T++,d++){const Y=T*A-e/2;if(f[d*y+0]=Y*x,f[d*y+1]=_*w,f[d*y+2]=E/2,f[d*y+3]=T/s,f[d*y+4]=o?1-g/h:g/h,g===h||T===s)continue;const et=p+T+g*(s+1),V=p+T+(g+1)*(s+1),rt=p+T+(g+1)*(s+1)+1,H=p+T+g*(s+1)+1;l[m*6]=et,l[m*6+1]=V,l[m*6+2]=H,l[m*6+3]=V,l[m*6+4]=rt,l[m*6+5]=H,m++}}return{width:e,height:r,vertexCount:l.length,vertexStride:y,interleavedArray:f,indicesArray:l}},or=sr,hr=(t={})=>{const{width:e=1,height:r=1}=t,i=4,n=3,o=new Float32Array(i*n);return o[0]=-e*.5,o[1]=-r*.5,o[2]=0,o[3]=e*.5,o[4]=-r*.5,o[5]=0,o[6]=e*.5,o[7]=r*.5,o[8]=0,o[9]=-e*.5,o[10]=r*.5,o[11]=0,{width:e,height:r,vertexCount:i,vertexStride:n,interleavedArray:o}},cr=hr,lr=(t={})=>{const{radius:e=1,segments:r=32,thetaStart:i=0,thetaEnd:n=Math.PI*2}=t,o=[],s=[],h=[];s.push(0,0,0),h.push(0,0);for(let l=0,d=3;l<=r;l++,d+=3){const m=i+l/r*n,p=Math.cos(m)*e,A=Math.sin(m)*e;s.push(p,A,0);const v=(s[d]/e+1)/2,x=(s[d+1]/e+1)/2;h.push(v,x)}for(let l=1;l<=r;l++)o.push(l,l+1,0);const c=5,u=r>65536?new Uint32Array(o):new Uint16Array(o),f=new Float32Array((r+1)*3*c);for(let l=0;l<=r+1;l++)f[l*5+0]=s[l*3+0],f[l*5+1]=s[l*3+1],f[l*5+2]=s[l*3+2],f[l*5+3]=h[l*2+0],f[l*5+4]=h[l*2+1];return{radius:e,interleavedArray:f,vertexCount:r*3,vertexStride:c,indicesArray:u}},dr=lr,ur=(t={})=>{const{radius:e=1,segments:r=32,thetaStart:i=0,thetaEnd:n=Math.PI*2}=t,o=3,s=new Float32Array(r*o),h=n/r;for(let c=0;c<r;c++){const u=Math.cos(i+c*h)*e,f=Math.sin(i+c*h)*e;s[c*3+0]=u,s[c*3+1]=f,s[c*3+2]=0}return{radius:e,vertexCount:r,vertexStride:o,interleavedArray:s}},fr=ur,mr=(t,e,r,i,n,o)=>{const s=new Float32Array(9);return s[0]=t,s[1]=e,s[2]=0,s[3]=r,s[4]=i,s[5]=0,s[6]=n,s[7]=o,s[8]=0,{vertexCount:3,vertexStride:3,interleavedArray:s}},pr=mr,gr=class{constructor(){R(this,"upVector",it(0,1,0));R(this,"position",it(0,0,0));R(this,"lookAt",it(0,0,0));R(this,"projectionMatrix",$());R(this,"viewMatrix",$());R(this,"viewMatrixInverse",$());R(this,"projectionViewMatrix",$())}updateViewMatrix(){return Xe(this.viewMatrix,this.position,this.lookAt,this.upVector),Xt(this.viewMatrixInverse,this.viewMatrix),this}updateProjectionMatrix(){return this}updateProjectionViewMatrix(){return this.updateViewMatrix(),this.updateProjectionMatrix(),zt(this.projectionViewMatrix,this.projectionMatrix,this.viewMatrix),this}},vr=class extends gr{constructor(e,r,i,n,o,s){super();R(this,"left");R(this,"right");R(this,"bottom");R(this,"top");R(this,"near");R(this,"far");this.left=e,this.right=r,this.top=i,this.bottom=n,this.near=o,this.far=s,this.updateProjectionMatrix()}updateProjectionMatrix(){return $e(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far),this}},Ar=class{constructor(){R(this,"position",it(0,0,0));R(this,"rotation",it(0,0,0));R(this,"scale",it(1,1,1));R(this,"modelMatrix",$());R(this,"shouldUpdate",!0)}copyFromMatrix(t){return jt(this.modelMatrix,t),this.shouldUpdate=!1,this}setPosition(t){return Bt(this.position,t),this.shouldUpdate=!0,this}setScale(t){return Bt(this.scale,t),this.shouldUpdate=!0,this}setRotation(t){return Bt(this.rotation,t),this.shouldUpdate=!0,this}updateModelMatrix(){return $t(this.modelMatrix),Ye(this.modelMatrix,this.modelMatrix,this.position),We(this.modelMatrix,this.modelMatrix,this.rotation[0]),Ve(this.modelMatrix,this.modelMatrix,this.rotation[1]),He(this.modelMatrix,this.modelMatrix,this.rotation[2]),ke(this.modelMatrix,this.modelMatrix,this.scale),this.shouldUpdate=!1,this}},xr=class extends Ar{constructor(e=void 0){super();R(this,"parentNode",null);R(this,"_children",[]);R(this,"_visible",!0);R(this,"worldMatrix",$());R(this,"normalMatrix",$());R(this,"uid",Ge(9));R(this,"name");this.name=e}get visible(){return this._visible}set visible(e){this._visible=e}get children(){return this._children}get siblings(){return this.parentNode?this.parentNode._children:[]}get levelIndex(){let e=0,r=this.parentNode;for(;r;)e++,r=r.parentNode;return e}setParent(e=null){if(this.parentNode){const r=this.parentNode._children.indexOf(this);r>=0&&this.parentNode._children.splice(r,1)}return e&&e.addChild(this),this.parentNode=e,this}addChild(e){return this._children.push(e),this}updateWorldMatrix(e=null){this.shouldUpdate&&this.updateModelMatrix(),e?zt(this.worldMatrix,e,this.modelMatrix):jt(this.worldMatrix,this.modelMatrix),Xt(this.normalMatrix,this.worldMatrix),Ce(this.normalMatrix,this.normalMatrix);for(let r=0;r<this._children.length;r++)this._children[r].updateWorldMatrix(this.worldMatrix);return this}traverse(e,r=0){e(this,r),r++;for(let i=0;i<this._children.length;i++)this._children[i].traverse(e,r)}findChild(e){if(e(this))return this;let r=null;for(let i=0;i<this._children.length&&!(r=this._children[i].findChild(e));i++);return r}findChildByName(e){if(this.name===e)return this;let r=null;for(let i=0;i<this._children.length&&!(r=this._children[i].findChildByName(e));i++);return r}findParent(e){if(e(this))return this;let r=null,i=this.parentNode;for(;i&&!(r=i.findParent(e));)i=i==null?void 0:i.parentNode;return r}findParentByName(e){if(this.name===e)return this;let r=null,i=this.parentNode;for(;i&&!(r=i.findParentByName(e));)i=i==null?void 0:i.parentNode;return r}render(){if(this._visible)for(let e=0;e<this._children.length;e++)this._children[e].render()}},nt,Rt=class extends xr{constructor(t,e,r,i={},n){if(super(n),z(this,"gl"),z(this,"vao"),z(this,"vertexCount"),wt(this,nt,new Map),z(this,"boundingBox"),z(this,"program"),this.gl=t,this.vao=t.createVertexArray(),this.program=Nt(t,e,r,i),this.program.__SPECTOR_Metadata={name:n,shaderDefines:i},!this.setUniform(Rt.WORLD_MATRIX_UNIFORM_NAME,{type:t.FLOAT_MAT4}))throw new Error(`Each Drawable is expected to have a mat4 ${Rt.WORLD_MATRIX_UNIFORM_NAME} implemented in shader`)}setUniform(t,{type:e,value:r}){const i=this.gl;let n;if(n=I(this,nt).get(t))n.value=r;else{const o=i.getUniformLocation(this.program,t);if(!o)return console.error(`uniform with name ${t} was not found in the program`),!1;n={type:e,location:o,value:r},I(this,nt).set(t,n)}return r!=null&&(i.useProgram(this.program),ee(i,n.type,n.location,r)),!0}updateUniform(t,e){let r;if(r=this.getUniform(t)){r.value=e;const i=this.gl;return i.useProgram(this.program),ee(i,r.type,r.location,e),!0}return!1}getUniform(t){let e;return(e=I(this,nt).get(t))?e:(console.error("can't locate uniform with that name"),null)}updateWorldMatrix(t){return super.updateWorldMatrix(t),this.updateUniform(Rt.WORLD_MATRIX_UNIFORM_NAME,this.worldMatrix),this}destroy(){I(this,nt).clear();const t=this.gl;t.deleteVertexArray(this.vao),t.deleteProgram(this.program)}},yr=Rt;nt=new WeakMap,z(yr,"WORLD_MATRIX_UNIFORM_NAME","u_worldMatrix");var Er=document.createElement("canvas"),re=Er.getContext("webgl2"),W=re.MAX_TEXTURE_SIZE,bt=re.RGB,Pt,b,St=!1,G,at,st,Dt=class{constructor(){if(wt(this,G,[]),wt(this,at,[]),wt(this,st,document.createElement("div")),St){const t=document.createElement("style"),e="hwoa-rang-texture-atlas-debug";t.setAttribute("type","text/css");const r=`
        #${e} {
          position: fixed;
          bottom: 1rem;
          right: 1rem;
          transform-origin: 100% 100%;
          width: 400px;
          max-height: 100vh;
          overflow: scroll;
        }
        #${e} canvas {
          max-width: 100%;
        }
      `;t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t),rr(this,st,document.createElement("div")),I(this,st).setAttribute("id",e),document.body.appendChild(I(this,st))}}static set debugMode(t){St=t}static get textureSize(){return W}static set textureSize(t){W=t}static set textureFormat(t){bt=t}static set gl(t){b=t}static getInstance(){if(!b)throw new Error("You must provide a WebGL2RenderingContext first via setting the TextureAtlas.gl property!");return Pt||(Pt=new Dt),Pt}pack(t,e,r=1){const i=()=>{const d=document.createElement("canvas");I(this,st).appendChild(d),d.width=W,d.height=W;const m=b.createTexture();b.bindTexture(b.TEXTURE_2D,m),b.texParameterf(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR),b.texImage2D(b.TEXTURE_2D,0,bt,W,W,0,bt,b.UNSIGNED_BYTE,null),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null);const p=new Ze(d);return I(this,G).push(p),I(this,at).push(m),p};let n=I(this,G)[I(this,G).length-1];n||(n=i());const o=r===1?e:Dt.scaleDownDrawableByFactor(e,r);n.pack(t,o)||(n=i(),n.pack(t,o));const s=n.uv()[t];for(let d=0;d<s.length;d++)s[d][0]*=W,s[d][1]*=W;const h=I(this,at)[I(this,at).length-1],c=s[0][0],u=s[0][1],f=s[2][0]-s[0][0],l=s[2][1]-s[0][1];return b.bindTexture(b.TEXTURE_2D,h),b.texSubImage2D(b.TEXTURE_2D,0,c,u,f,l,bt,b.UNSIGNED_BYTE,o),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null),this}getUv2(t){let e=-1;for(let r=0;r<I(this,G).length;r++){const i=I(this,G)[r].uv2()[t];if(i){e=r;const n=I(this,at)[e];return[i,n]}}throw new Error("Can't get uvs")}},_r=Dt;G=new WeakMap,at=new WeakMap,st=new WeakMap,z(_r,"scaleDownDrawableByFactor",(t,e)=>{const r=document.createElement("canvas"),i=t instanceof HTMLImageElement?t.naturalWidth:t.width,n=t instanceof HTMLImageElement?t.naturalHeight:t.height;r.width=i/e,r.height=n/e,St&&console.log(`Scaled ${i}x${n} project image to ${r.width}x${r.height}`);const o=r.getContext("2d");return o.imageSmoothingQuality="high",o.drawImage(t,0,0,i,n,0,0,r.width,r.height),r});var ie=`#version 300 es

-- DEFINES_HOOK --

uniform mat4 uProjectionViewMatrix;

in vec4 aInstanceTransform;
in vec4 aPosition;
in vec4 aColor;
in vec2 aUV;

out vec2 vUV;
out vec4 vColor;

vec2 rotate(vec2 v, float a) {
	float s = sin(a);
	float c = cos(a);
	mat2 m = mat2(c, s, -s, c);
	return m * v;
}

void main () {
  vec4 pos = aPosition;

  #ifdef IS_LINES
    if (aPosition.x == 0.0f) {
      pos.xy = aInstanceTransform.xy;
    } else {
      pos.xy = aInstanceTransform.zw;
    }
  #else
    vec2 offset = aInstanceTransform.xy;
    float angle = aInstanceTransform.z;
    float scale = aInstanceTransform.w;

    pos.xy *= scale;
    pos.xy = rotate(pos.xy, angle);
    pos.xy += offset;
  #endif
  
  gl_Position = uProjectionViewMatrix * pos;

  vUV = aUV;
  vColor = aColor;
}`,ne=`#version 300 es
precision highp float;

-- DEFINES_HOOK --

in vec2 vUV;
in vec4 vColor;

out vec4 finalColor;

void main () {
  #ifdef LINES
    finalColor = vec4(vec3(0.8), 1.0);
  #else
    finalColor = vColor;
  #endif
}`;const wr=await Le(()=>import("./Phy2D-8i1OeZ3-.js"),__vite__mapDeps([]),import.meta.url),{Vec2:ut,Body:q,World:Rr,vector$Vec2$:br}=await wr.default(),Fr=0,ae=1,se=2,oe=new ut(-1e3,-1e3),he=Math.min(innerWidth,1920),Mr=300,Tr=innerWidth*innerHeight,Ir=5e5,ot=Tr<Ir,Br=innerWidth-he,ht=new ut(-1e3,-1e3);let ce=0;const K=document.getElementById("c");Hr();const a=K.getContext("webgl2"),Ct=new De(a),Ft=new vr(0,innerWidth,0,innerHeight,.1,10);Ft.position[2]=1,Ft.updateProjectionViewMatrix();const L=Nt(a,ie,ne,{}),ft=Nt(a,ie,ne,{LINES:!0}),J=a.getAttribLocation(L,"aInstanceTransform"),mt=a.getAttribLocation(L,"aPosition"),Ot=a.getAttribLocation(L,"aUV"),Q=a.getAttribLocation(L,"aColor");let Yt=a.getUniformLocation(L,"uProjectionViewMatrix");a.useProgram(L),a.uniformMatrix4fv(Yt,!1,Ft.projectionViewMatrix),Yt=a.getUniformLocation(ft,"uProjectionViewMatrix"),a.useProgram(ft),a.uniformMatrix4fv(Yt,!1,Ft.projectionViewMatrix);const kt=[],F=document.createElement("canvas");F.width=innerWidth,F.height=innerHeight,F.style.setProperty("position","fixed"),F.style.setProperty("top",`${-innerHeight*.1}px`),F.style.setProperty("left","0px"),F.style.setProperty("z-index","999"),F.classList.add("fadeable"),document.body.appendChild(F);const B=F.getContext("2d"),le=1;B.font=`bold ${le}px Helvetica`;const de="2024",Ur=le*(F.width*.77/B.measureText(de).width);B.font=`bold ${Ur}px Helvetica`,B.textAlign="center",B.textBaseline="middle",B.fillStyle="white",B.save(),B.translate(F.width*.5,F.height*.5),B.scale(1,1),B.fillStyle="black",B.fillText(de,0,0),B.restore();const Lr=new Uint32Array(B.getImageData(0,0,F.width,F.height).data.buffer),Nr=10,Pr=10;B.globalAlpha=.2;for(let t=0;t<F.width;t+=Nr)for(let e=0;e<F.height;e+=Pr)Lr[e*F.width+t]&&kt.push({x:t,y:e});const N=[],P=[],S=[],Z=new Rr(-4.5,innerWidth,innerHeight);Z.gravity=-1;const ue=new q(innerWidth,1,innerWidth*.5,innerHeight,0);ue.restitution=1;const Sr=new q(1,innerHeight*2,0,innerHeight*.5,0),Dr=new q(1,innerHeight*2,innerWidth-1,innerHeight*.5,0);Z.AddBody(ue),Z.AddBody(Sr),Z.AddBody(Dr);const ct=new q(60,-1e3,-100,0);ct.restitution=.3,Z.AddBody(ct);let tt=0;const Mt=innerHeight;for(;tt<Mt;){let t=0,e=0;const r=Math.cos(tt/Mt*Math.PI*2);for(;e<he;){const i=ot?11:21,n=ot?25:36;let o=(r*i+n)*.5,s=o+Math.random()*o;const h=s*.5+e+Br*.5,c=tt;let u,f=Math.random()<.9?ae:se;tt>Mt*.3&&tt<Mt*.7&&(f=Math.floor(Math.random()*2));const l=tt-innerHeight*.1;if(f===ae)u=new q(s*1.015,h,l,1),u.scale=s,P.push(u);else if(f===Fr)u=new q(s*2*1.015,s*2*1.015,h,l,2),u.scale=s*2,N.push(u);else if(f===se){const d=new br;d.push_back(new ut(-.5*s*2,.5*s*2)),d.push_back(new ut(0*s*2,-.5*s*2)),d.push_back(new ut(.5*s*2,.5*s*2)),u=new q(d,h,l,10,0,0),u.scale=s*2,S.push(u)}s>t&&(t=s),u.restitution=.1,u.color=1,Z.AddBody(u);for(let d=0;d<kt.length;d++){const{x:m,y:p}=kt[d],A=m-h,v=p-c*1;Math.sqrt(A*A+v*v)<10&&(u.color=0)}e+=s*2}tt+=t*1.4}const D=new Float32Array(N.length*4),Tt=new Float32Array(N.length*3),C=new Float32Array(P.length*4),pt=new Float32Array(P.length*3),O=new Float32Array(S.length*4),gt=new Float32Array(S.length*3);for(let t=0;t<N.length;t++){const e=N[t];D[t*4+0]=e.position.x,D[t*4+1]=e.position.y,D[t*4+2]=0,D[t*4+3]=e.scale,Tt[t*3+0]=0,Tt[t*3+1]=e.color,Tt[t*3+2]=0}for(let t=0;t<P.length;t++){const e=P[t];C[t*4+0]=e.position.x,C[t*4+1]=e.position.y,C[t*4+2]=0,C[t*4+3]=e.scale,pt[t*3+0]=0,pt[t*3+1]=e.color,pt[t*3+2]=0}for(let t=0;t<S.length;t++){const e=S[t];O[t*4+0]=e.position.x,O[t*4+1]=e.position.y,O[t*4+2]=0,O[t*4+3]=e.scale,gt[t*3+0]=0,gt[t*3+1]=e.color,gt[t*3+2]=0}const vt=or(),fe=cr(),me=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,me),a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW);const pe=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,pe),a.bufferData(a.ARRAY_BUFFER,Tt,a.STATIC_DRAW);const ge=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ge),a.bufferData(a.ARRAY_BUFFER,vt.interleavedArray,a.STATIC_DRAW);const ve=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ve),a.bufferData(a.ARRAY_BUFFER,fe.interleavedArray,a.STATIC_DRAW);const Ae=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Ae),a.bufferData(a.ELEMENT_ARRAY_BUFFER,vt.indicesArray,a.STATIC_DRAW);const At=dr(),xe=fr(),ye=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ye),a.bufferData(a.ARRAY_BUFFER,C,a.DYNAMIC_DRAW);const Ee=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Ee),a.bufferData(a.ARRAY_BUFFER,pt,a.STATIC_DRAW);const _e=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,_e),a.bufferData(a.ARRAY_BUFFER,At.interleavedArray,a.STATIC_DRAW);const we=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,we),a.bufferData(a.ARRAY_BUFFER,xe.interleavedArray,a.STATIC_DRAW);const Re=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Re),a.bufferData(a.ELEMENT_ARRAY_BUFFER,At.indicesArray,a.STATIC_DRAW);const Wt=pr(-.5,.5,0,-.5,.5,.5),be=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,be),a.bufferData(a.ARRAY_BUFFER,O,a.DYNAMIC_DRAW);const Fe=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Fe),a.bufferData(a.ARRAY_BUFFER,gt,a.STATIC_DRAW);const Me=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Me),a.bufferData(a.ARRAY_BUFFER,Wt.interleavedArray,a.STATIC_DRAW);const Vt=matchMedia("(orientation: portrait)"),Cr=Vt.matches;Vt.addEventListener("change",()=>{Cr&&!Vt.matches&&location.reload()}),setTimeout(()=>{F.classList.add("faded"),requestAnimationFrame(Ie),F.addEventListener("transitionend",()=>{F.parentNode.removeChild(F)})},Mr),document.body.addEventListener("mousedown",Or),document.body.addEventListener("mouseup",Yr),document.body.addEventListener("touchmove",kr),document.body.addEventListener("touchend",Wr);function Or(){document.body.addEventListener("mousemove",Te)}function Te(t){const e=Be(t.pageX),r=Ue(t.pageY);ht.x=e,ht.y=r,ct.position=ht}function Yr(){document.body.removeEventListener("mousemove",Te),ct.position=oe}function kr(t){const e=Be(t.pageX),r=Ue(t.pageY);ht.x=e,ht.y=r,ct.position=ht,t.preventDefault()}function Wr(){ct.position=oe}function Ie(t){const e=Math.min((t-ce)*.001,.01667);ce=t,Ct.begin("Simulation"),Z.Update(e);for(let r=0;r<P.length;r++){const i=P[r];C[r*4+0]=i.position.x,C[r*4+1]=i.position.y,C[r*4+2]=i.rotation}for(let r=0;r<N.length;r++){const i=N[r];D[r*4+0]=i.position.x,D[r*4+1]=i.position.y,D[r*4+2]=i.rotation}for(let r=0;r<S.length;r++){const i=S[r];O[r*4+0]=i.position.x,O[r*4+1]=i.position.y,O[r*4+2]=i.rotation}a.viewport(0,0,K.width,K.height),a.clearColor(.6,.6,.6,1),a.clear(a.COLOR_BUFFER_BIT),a.enableVertexAttribArray(J),a.enableVertexAttribArray(Q),a.enableVertexAttribArray(mt),a.enableVertexAttribArray(Ot),Vr(),Ct.end("Simulation"),Ct.nextFrame(t),requestAnimationFrame(Ie)}function Vr(){a.useProgram(L),a.bindBuffer(a.ARRAY_BUFFER,me),a.bufferData(a.ARRAY_BUFFER,D,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,pe),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,ge),a.vertexAttribPointer(mt,3,a.FLOAT,!1,vt.vertexStride*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(Ot,2,a.FLOAT,!1,vt.vertexStride*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Ae),a.drawElementsInstanced(a.TRIANGLES,vt.vertexCount,a.UNSIGNED_SHORT,0,N.length),a.useProgram(ft),a.bindBuffer(a.ARRAY_BUFFER,ve),a.vertexAttribPointer(mt,3,a.FLOAT,!1,0,0),a.drawArraysInstanced(a.LINE_LOOP,0,fe.vertexCount,N.length),a.useProgram(L),a.bindBuffer(a.ARRAY_BUFFER,ye),a.bufferData(a.ARRAY_BUFFER,C,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,Ee),a.bufferData(a.ARRAY_BUFFER,pt,a.STATIC_DRAW),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,_e),a.vertexAttribPointer(mt,3,a.FLOAT,!1,At.vertexStride*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(Ot,2,a.FLOAT,!1,At.vertexStride*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Re),a.drawElementsInstanced(a.TRIANGLES,At.vertexCount,a.UNSIGNED_SHORT,0,P.length),a.useProgram(ft),a.bindBuffer(a.ARRAY_BUFFER,we),a.drawArraysInstanced(a.LINE_LOOP,1,xe.vertexCount,P.length),a.useProgram(L),a.bindBuffer(a.ARRAY_BUFFER,be),a.bufferData(a.ARRAY_BUFFER,O,a.DYNAMIC_DRAW),a.vertexAttribPointer(J,4,a.FLOAT,!1,0,0),a.vertexAttribDivisor(J,1),a.bindBuffer(a.ARRAY_BUFFER,Fe),a.bufferData(a.ARRAY_BUFFER,gt,a.STATIC_DRAW),a.vertexAttribPointer(Q,3,a.FLOAT,!1,0,0),a.vertexAttribDivisor(Q,1),a.bindBuffer(a.ARRAY_BUFFER,Me),a.vertexAttribPointer(mt,3,a.FLOAT,!1,0,0),a.drawArraysInstanced(a.TRIANGLES,0,Wt.vertexCount,S.length),a.useProgram(ft),a.drawArraysInstanced(a.LINE_LOOP,0,Wt.vertexCount,S.length)}function Hr(){K.width=innerWidth,K.height=innerHeight,K.style.setProperty("width",`${innerWidth}px`),K.style.setProperty("height",`${innerHeight}px`)}function Be(t){const e=ot?.2:.1,r=ot?.8:.9;return t>innerWidth*r&&(t=innerWidth*r),t<innerWidth*e&&(t=innerWidth*e),t}function Ue(t){const e=ot?.25:.15,r=ot?.75:.85;return t>innerHeight*r&&(t=innerHeight*r),t<innerHeight*e&&(t=innerHeight*e),t}})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}